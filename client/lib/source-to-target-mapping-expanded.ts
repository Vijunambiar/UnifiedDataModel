/**
 * EXPANDED SOURCE-TO-TARGET MAPPING
 *
 * Additional source system mappings for critical internal systems
 * - Core Banking Platform (Finacle/T24/Temenos)
 * - Card Management System (TSYS/FIS)
 * - Loan Origination System (Fiserv/nCino)
 * - Experian Credit Bureau
 */

import type {
  SourceSystem,
  FieldMapping,
  DataLineage,
  SourceSchema,
  SourceField,
} from "./source-to-target-mapping";

// ============================================================================
// CORE BANKING PLATFORM - SOURCE SYSTEM
// ============================================================================

export const coreBankingSystem: SourceSystem = {
  sourceSystemId: "core-banking-001",
  sourceSystemCode: "CORE-BANK",
  sourceSystemName: "Core Banking Platform",
  vendor: "Oracle Financial Services",
  productName: "Oracle FLEXCUBE/Finacle",
  version: "14.5",

  systemType: "CORE_BANKING",
  criticality: "CRITICAL",

  integrationType: "CDC",
  dataFormat: "JSON",
  connectionDetails: {
    protocol: "Kafka CDC",
    host: "kafka-cdc-prod.bank.internal",
    port: 9092,
    endpoint: "/core-banking/cdc-events",
    authMethod: "SASL_SSL + Kerberos",
  },

  refreshFrequency: "Real-time CDC streaming + EOD batch reconciliation",
  avgDailyVolume: "~10M transactions, ~500K account updates",
  retentionPeriod: "10 years (regulatory requirement)",
  sla: {
    availability: "99.95% uptime",
    latency: "<5s for CDC events, <30min for EOD batch",
    refreshCadence: "Real-time streaming",
  },

  domains: [
    "customer-core",
    "customer-retail",
    "customer-commercial",
    "deposits-retail",
    "deposits-commercial",
    "loans-retail",
    "loans-commercial",
    "payments-retail",
    "payments-commercial",
    "branch-retail",
    "operations",
  ],
  dataTypes: [
    "Customer Master Data",
    "Account Master Data",
    "Transaction History",
    "Balance Snapshots (Daily)",
    "Product Master",
    "Branch/Channel Data",
    "General Ledger Integration",
    "Interest Accruals",
    "Fee Transactions",
    "Account Statements",
  ],
  keyEntities: [
    "Customers",
    "Accounts",
    "Transactions",
    "Products",
    "Branches",
  ],

  primaryContact: "Core Banking Operations Manager",
  supportTeam: "Oracle Support + Internal Core Banking Team",
  documentation:
    "https://docs.oracle.com/en/industries/financial-services/flexcube/",
  cost: "$5M+ annually (license + maintenance)",

  sourceSchemas: [
    {
      schemaName: "CUSTOMER_MASTER",
      tableName: "CORE_CUSTOMER",
      description: "Core banking customer master data (retail and commercial)",
      primaryKey: ["customer_id"],
      fields: [
        {
          sourceFieldName: "customer_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Core banking unique customer identifier",
          sampleValues: ["CUST-0000123456", "CUST-0000789012"],
          validationRules: ["Pattern: CUST-[0-9]{10}", "UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_type",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Customer type classification",
          sampleValues: ["RETAIL", "COMMERCIAL", "WEALTH", "PRIVATE_BANKING"],
          validationRules: [
            "ENUM: RETAIL, COMMERCIAL, WEALTH, PRIVATE_BANKING, SMALL_BUSINESS",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_segment",
          dataType: "STRING",
          length: 30,
          nullable: true,
          description: "Customer segment/tier",
          sampleValues: [
            "MASS_MARKET",
            "AFFLUENT",
            "PREMIER",
            "BUSINESS_BANKING",
            "CORPORATE",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "tax_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Tax identification number (SSN/EIN/TIN)",
          sampleValues: ["ENCRYPTED_VALUE"],
          validationRules: ["US SSN: 9 digits", "EIN: 9 digits"],
          piiFlag: true,
          encryptionRequired: true,
        },
        {
          sourceFieldName: "first_name",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "Customer first name (retail only)",
          sampleValues: ["John", "Jane"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "last_name",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "Customer last name (retail only)",
          sampleValues: ["Doe", "Smith"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "legal_entity_name",
          dataType: "STRING",
          length: 200,
          nullable: true,
          description: "Legal entity name (commercial only)",
          sampleValues: ["ACME Corporation", "XYZ Industries LLC"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "date_of_birth",
          dataType: "DATE",
          nullable: true,
          description: "Date of birth (retail only)",
          sampleValues: ["1985-03-15", "1990-07-22"],
          validationRules: ["Format: YYYY-MM-DD", "Age >= 18"],
          piiFlag: true,
          encryptionRequired: true,
        },
        {
          sourceFieldName: "email_address",
          dataType: "STRING",
          length: 100,
          nullable: true,
          description: "Primary email address",
          sampleValues: ["john.doe@email.com"],
          validationRules: ["Valid email format"],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "phone_number",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Primary phone number",
          sampleValues: ["+1-555-123-4567"],
          validationRules: ["E.164 format preferred"],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "address_line_1",
          dataType: "STRING",
          length: 100,
          nullable: true,
          description: "Street address line 1",
          sampleValues: ["123 Main Street"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "address_line_2",
          dataType: "STRING",
          length: 100,
          nullable: true,
          description: "Street address line 2",
          sampleValues: ["Apt 4B", "Suite 200"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "city",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "City",
          sampleValues: ["New York", "Chicago", "San Francisco"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "state_province",
          dataType: "STRING",
          length: 2,
          nullable: true,
          description: "State or province code",
          sampleValues: ["NY", "CA", "IL"],
          validationRules: ["US State: 2-letter code", "ISO 3166-2 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "postal_code",
          dataType: "STRING",
          length: 10,
          nullable: true,
          description: "Postal/ZIP code",
          sampleValues: ["10001", "60601", "94102-1234"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "country_code",
          dataType: "STRING",
          length: 2,
          nullable: false,
          description: "ISO country code",
          sampleValues: ["US", "CA", "GB"],
          validationRules: ["ISO 3166-1 alpha-2"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_since_date",
          dataType: "DATE",
          nullable: false,
          description: "Date when customer relationship started",
          sampleValues: ["2015-01-15", "2020-07-01"],
          validationRules: ["Format: YYYY-MM-DD", "<= CURRENT_DATE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_status",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Current customer status",
          sampleValues: ["ACTIVE", "INACTIVE", "CLOSED", "SUSPENDED"],
          validationRules: [
            "ENUM: ACTIVE, INACTIVE, CLOSED, SUSPENDED, PROSPECT",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "kyc_status",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Know Your Customer verification status",
          sampleValues: ["VERIFIED", "PENDING", "EXPIRED", "FAILED"],
          validationRules: [
            "ENUM: VERIFIED, PENDING, EXPIRED, FAILED, NOT_STARTED",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "kyc_last_updated_date",
          dataType: "DATE",
          nullable: true,
          description: "Date of last KYC review",
          sampleValues: ["2024-01-15"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "risk_rating",
          dataType: "STRING",
          length: 10,
          nullable: true,
          description: "AML/compliance risk rating",
          sampleValues: ["LOW", "MEDIUM", "HIGH"],
          validationRules: ["ENUM: LOW, MEDIUM, HIGH"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "home_branch_id",
          dataType: "STRING",
          length: 10,
          nullable: true,
          description: "Home branch identifier",
          sampleValues: ["BR-001", "BR-150"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "relationship_manager_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Assigned relationship manager employee ID",
          sampleValues: ["EMP-123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "created_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Record creation timestamp in core banking",
          sampleValues: ["2015-01-15T10:30:00Z"],
          validationRules: ["ISO 8601 format", "UTC timezone"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "last_modified_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Record last modification timestamp",
          sampleValues: ["2025-01-15T14:22:15Z"],
          validationRules: ["ISO 8601 format", "UTC timezone"],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
    {
      schemaName: "ACCOUNT_MASTER",
      tableName: "CORE_ACCOUNT",
      description: "Core banking account master data (all product types)",
      primaryKey: ["account_id"],
      fields: [
        {
          sourceFieldName: "account_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Core banking unique account identifier",
          sampleValues: ["ACCT-1234567890", "ACCT-9876543210"],
          validationRules: ["Pattern: ACCT-[0-9]{10}", "UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "account_number",
          dataType: "STRING",
          length: 17,
          nullable: false,
          description: "Customer-facing account number",
          sampleValues: ["ENCRYPTED_VALUE"],
          validationRules: ["Numeric", "Length 10-17 digits"],
          piiFlag: true,
          encryptionRequired: true,
        },
        {
          sourceFieldName: "customer_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Primary customer owner of account",
          sampleValues: ["CUST-0000123456"],
          validationRules: ["FK to CUSTOMER_MASTER"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "product_code",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Product type code",
          sampleValues: ["CHK-001", "SAV-001", "MMDA-001", "CD-001", "LOC-001"],
          validationRules: ["FK to PRODUCT_MASTER"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "product_category",
          dataType: "STRING",
          length: 30,
          nullable: false,
          description: "High-level product category",
          sampleValues: [
            "CHECKING",
            "SAVINGS",
            "MONEY_MARKET",
            "CD",
            "LOAN",
            "CREDIT_CARD",
            "LINE_OF_CREDIT",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "account_type",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Asset or liability classification",
          sampleValues: ["ASSET", "LIABILITY"],
          validationRules: ["ENUM: ASSET, LIABILITY"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "account_name",
          dataType: "STRING",
          length: 100,
          nullable: false,
          description: "Account title/name",
          sampleValues: ["John Doe Checking", "ACME Corp Operating Account"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "current_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Current account balance",
          sampleValues: ["5432.10", "125000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "available_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Available balance (current - holds)",
          sampleValues: ["5200.10", "124000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "ledger_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "General ledger balance (end-of-day)",
          sampleValues: ["5432.10", "125000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "currency_code",
          dataType: "STRING",
          length: 3,
          nullable: false,
          description: "ISO currency code",
          sampleValues: ["USD", "EUR", "GBP"],
          validationRules: ["ISO 4217"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "account_status",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Current account status",
          sampleValues: ["ACTIVE", "DORMANT", "CLOSED", "FROZEN", "RESTRICTED"],
          validationRules: [
            "ENUM: ACTIVE, DORMANT, CLOSED, FROZEN, RESTRICTED, PENDING",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "open_date",
          dataType: "DATE",
          nullable: false,
          description: "Account opening date",
          sampleValues: ["2020-01-15", "2018-07-22"],
          validationRules: ["Format: YYYY-MM-DD", "<= CURRENT_DATE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "close_date",
          dataType: "DATE",
          nullable: true,
          description: "Account closing date",
          sampleValues: ["2024-12-31"],
          validationRules: ["Format: YYYY-MM-DD", ">= open_date"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "maturity_date",
          dataType: "DATE",
          nullable: true,
          description: "Maturity date (for time deposits, loans)",
          sampleValues: ["2026-01-15"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "interest_rate",
          dataType: "DECIMAL",
          precision: 7,
          scale: 4,
          nullable: true,
          description: "Current interest rate (%)",
          sampleValues: ["0.0150", "4.2500"],
          validationRules: ["Range: 0-100"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "home_branch_id",
          dataType: "STRING",
          length: 10,
          nullable: true,
          description: "Home branch identifier",
          sampleValues: ["BR-001", "BR-150"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "routing_number",
          dataType: "STRING",
          length: 9,
          nullable: true,
          description: "ABA routing number (US accounts)",
          sampleValues: ["091000019", "121000248"],
          validationRules: ["Numeric", "Length = 9", "Valid ABA routing"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "iban",
          dataType: "STRING",
          length: 34,
          nullable: true,
          description: "International Bank Account Number",
          sampleValues: ["GB29NWBK60161331926819"],
          validationRules: ["Valid IBAN format"],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "overdraft_limit",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Overdraft protection limit",
          sampleValues: ["1000.00", "5000.00"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "last_transaction_date",
          dataType: "DATE",
          nullable: true,
          description: "Date of last transaction",
          sampleValues: ["2025-01-14"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "created_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Record creation timestamp",
          sampleValues: ["2020-01-15T09:00:00Z"],
          validationRules: ["ISO 8601 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "last_modified_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Record last modification timestamp",
          sampleValues: ["2025-01-15T18:45:22Z"],
          validationRules: ["ISO 8601 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
    {
      schemaName: "TRANSACTION_HISTORY",
      tableName: "CORE_TRANSACTION",
      description: "Core banking transaction history (all account types)",
      primaryKey: ["transaction_id"],
      fields: [
        {
          sourceFieldName: "transaction_id",
          dataType: "STRING",
          length: 50,
          nullable: false,
          description: "Unique transaction identifier",
          sampleValues: ["TXN-2025011500001234", "TXN-2025011500005678"],
          validationRules: ["Pattern: TXN-YYYYMMDD########", "UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "account_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Account identifier",
          sampleValues: ["ACCT-1234567890"],
          validationRules: ["FK to ACCOUNT_MASTER"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "transaction_type",
          dataType: "STRING",
          length: 30,
          nullable: false,
          description: "Transaction type code",
          sampleValues: [
            "DEPOSIT",
            "WITHDRAWAL",
            "TRANSFER",
            "FEE",
            "INTEREST",
            "PAYMENT",
            "REFUND",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "transaction_code",
          dataType: "STRING",
          length: 10,
          nullable: false,
          description: "Internal transaction code",
          sampleValues: ["DEP-001", "WDL-002", "TRF-003"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "debit_credit_indicator",
          dataType: "STRING",
          length: 2,
          nullable: false,
          description: "Debit or credit to account",
          sampleValues: ["DR", "CR"],
          validationRules: ["ENUM: DR, CR"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "transaction_amount",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Transaction amount (absolute value)",
          sampleValues: ["100.00", "2500.50"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "currency_code",
          dataType: "STRING",
          length: 3,
          nullable: false,
          description: "Transaction currency",
          sampleValues: ["USD", "EUR"],
          validationRules: ["ISO 4217"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "transaction_date",
          dataType: "DATE",
          nullable: false,
          description: "Transaction date (business date)",
          sampleValues: ["2025-01-15"],
          validationRules: ["Format: YYYY-MM-DD"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "transaction_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Transaction timestamp (system time)",
          sampleValues: ["2025-01-15T14:22:15Z"],
          validationRules: ["ISO 8601 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "value_date",
          dataType: "DATE",
          nullable: false,
          description: "Value/effective date for interest calculation",
          sampleValues: ["2025-01-15"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "description",
          dataType: "STRING",
          length: 255,
          nullable: false,
          description: "Transaction description",
          sampleValues: [
            "ATM Withdrawal",
            "Deposit Check #1234",
            "Transfer to Savings",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "channel",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Transaction channel/source",
          sampleValues: [
            "ATM",
            "BRANCH",
            "ONLINE",
            "MOBILE",
            "ACH",
            "WIRE",
            "CHECK",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "reference_number",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "External reference number (check #, confirmation #)",
          sampleValues: ["CHK-1234", "CONF-ABC123"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "counterparty_account_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Counterparty account (for transfers)",
          sampleValues: ["ACCT-9876543210"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "branch_id",
          dataType: "STRING",
          length: 10,
          nullable: true,
          description: "Branch where transaction occurred",
          sampleValues: ["BR-001", "BR-150"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "teller_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Teller/employee who processed transaction",
          sampleValues: ["EMP-123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "balance_after_transaction",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Account balance after transaction",
          sampleValues: ["5432.10"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "reversal_flag",
          dataType: "BOOLEAN",
          nullable: false,
          description: "Indicates if transaction is a reversal",
          sampleValues: ["false", "true"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "reversed_transaction_id",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "Original transaction ID if this is a reversal",
          sampleValues: ["TXN-2025011400001234"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
  ],
};

// ============================================================================
// CARD MANAGEMENT SYSTEM - SOURCE SYSTEM
// ============================================================================

export const cardManagementSystem: SourceSystem = {
  sourceSystemId: "card-system-001",
  sourceSystemCode: "CARD-SYS",
  sourceSystemName: "Card Management Platform",
  vendor: "TSYS/Fiserv",
  productName: "TSYS Prime",
  version: "7.2",

  systemType: "CARD_PROCESSOR",
  criticality: "CRITICAL",

  integrationType: "STREAMING",
  dataFormat: "AVRO",
  connectionDetails: {
    protocol: "Kafka Streams",
    host: "kafka-card-prod.bank.internal",
    port: 9092,
    endpoint: "/card-events",
    authMethod: "SASL_SSL",
  },

  refreshFrequency: "Real-time event streaming + Daily batch for static data",
  avgDailyVolume: "~5M authorization events, ~2M purchase transactions",
  retentionPeriod: "7 years",
  sla: {
    availability: "99.99% uptime",
    latency: "<2s for authorization, <5s for settlement",
    refreshCadence: "Real-time streaming",
  },

  domains: [
    "cards-retail",
    "fraud-retail",
    "payments-retail",
    "customer-retail",
  ],
  dataTypes: [
    "Card Accounts",
    "Card Profiles",
    "Authorization Events",
    "Purchase Transactions",
    "Payment Transactions",
    "Statement Data",
    "Rewards Balances",
    "Card Lifecycle Events",
    "Merchant Data (MCC)",
    "Dispute/Chargeback Data",
  ],
  keyEntities: [
    "Cards",
    "Authorizations",
    "Transactions",
    "Merchants",
    "Rewards",
  ],

  primaryContact: "Card Operations Manager",
  supportTeam: "TSYS Support + Internal Card Team",
  documentation: "https://docs.tsys.com/prime/v7.2",
  cost: "$1M+ annually",

  sourceSchemas: [
    {
      schemaName: "CARD_ACCOUNT",
      tableName: "CARD_ACCOUNT_MASTER",
      description: "Card account master data (credit and debit cards)",
      primaryKey: ["card_account_id"],
      fields: [
        {
          sourceFieldName: "card_account_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Unique card account identifier",
          sampleValues: ["CARD-ACC-1234567890", "CARD-ACC-9876543210"],
          validationRules: ["UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "card_number",
          dataType: "STRING",
          length: 19,
          nullable: false,
          description: "Card number (PCI-sensitive)",
          sampleValues: ["ENCRYPTED_VALUE"],
          validationRules: ["16-19 digits", "Luhn checksum"],
          piiFlag: true,
          encryptionRequired: true,
        },
        {
          sourceFieldName: "card_type",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Card type",
          sampleValues: ["CREDIT", "DEBIT", "PREPAID"],
          validationRules: ["ENUM: CREDIT, DEBIT, PREPAID, CHARGE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "card_brand",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Card network brand",
          sampleValues: ["VISA", "MASTERCARD", "AMEX", "DISCOVER"],
          validationRules: ["ENUM: VISA, MASTERCARD, AMEX, DISCOVER"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "cardholder_name",
          dataType: "STRING",
          length: 100,
          nullable: false,
          description: "Name embossed on card",
          sampleValues: ["JOHN DOE", "JANE SMITH"],
          validationRules: [],
          piiFlag: true,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Link to core banking customer",
          sampleValues: ["CUST-0000123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "linked_account_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Linked deposit account (for debit cards)",
          sampleValues: ["ACCT-1234567890"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "credit_limit",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Credit limit (for credit cards)",
          sampleValues: ["10000.00", "25000.00"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "available_credit",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Available credit balance",
          sampleValues: ["8500.00", "22000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "current_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Current outstanding balance",
          sampleValues: ["1500.00", "3000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "card_status",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Current card status",
          sampleValues: [
            "ACTIVE",
            "BLOCKED",
            "LOST",
            "STOLEN",
            "EXPIRED",
            "CLOSED",
          ],
          validationRules: [
            "ENUM: ACTIVE, BLOCKED, LOST, STOLEN, EXPIRED, CLOSED, SUSPENDED",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "issue_date",
          dataType: "DATE",
          nullable: false,
          description: "Card issue date",
          sampleValues: ["2022-01-15"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "expiry_date",
          dataType: "DATE",
          nullable: false,
          description: "Card expiration date (MM/YY)",
          sampleValues: ["2027-01-31"],
          validationRules: ["> issue_date"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "cvv",
          dataType: "STRING",
          length: 4,
          nullable: false,
          description: "Card verification value (PCI-sensitive)",
          sampleValues: ["ENCRYPTED_VALUE"],
          validationRules: ["3-4 digits"],
          piiFlag: true,
          encryptionRequired: true,
        },
        {
          sourceFieldName: "pin_set_flag",
          dataType: "BOOLEAN",
          nullable: false,
          description: "Indicates if PIN has been set",
          sampleValues: ["true", "false"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "rewards_program_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Associated rewards program",
          sampleValues: ["REWARDS-CASH-BACK", "REWARDS-TRAVEL"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "rewards_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Current rewards points/cash balance",
          sampleValues: ["12500.00", "450.75"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
    {
      schemaName: "CARD_AUTHORIZATION",
      apiEndpoint: "/card-events/authorizations",
      description: "Real-time card authorization events",
      primaryKey: ["authorization_id"],
      fields: [
        {
          sourceFieldName: "authorization_id",
          dataType: "STRING",
          length: 50,
          nullable: false,
          description: "Unique authorization identifier",
          sampleValues: ["AUTH-2025011514221234", "AUTH-2025011515331234"],
          validationRules: ["UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "card_account_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Card account identifier",
          sampleValues: ["CARD-ACC-1234567890"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "authorization_amount",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Authorization amount",
          sampleValues: ["45.67", "250.00"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "authorization_currency",
          dataType: "STRING",
          length: 3,
          nullable: false,
          description: "Transaction currency",
          sampleValues: ["USD", "EUR"],
          validationRules: ["ISO 4217"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "authorization_response_code",
          dataType: "STRING",
          length: 2,
          nullable: false,
          description: "Authorization response code (ISO 8583)",
          sampleValues: ["00", "05", "51", "96"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "authorization_status",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Authorization status",
          sampleValues: ["APPROVED", "DECLINED", "REFERRED", "TIMEOUT"],
          validationRules: [
            "ENUM: APPROVED, DECLINED, REFERRED, TIMEOUT, ERROR",
          ],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "merchant_name",
          dataType: "STRING",
          length: 100,
          nullable: false,
          description: "Merchant name",
          sampleValues: ["AMAZON.COM", "WALMART SUPERCENTER"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "merchant_category_code",
          dataType: "STRING",
          length: 4,
          nullable: false,
          description: "Merchant Category Code (MCC)",
          sampleValues: ["5411", "5812", "4011"],
          validationRules: ["4-digit numeric"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "merchant_city",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "Merchant city",
          sampleValues: ["NEW YORK", "SAN FRANCISCO"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "merchant_country",
          dataType: "STRING",
          length: 2,
          nullable: false,
          description: "Merchant country code",
          sampleValues: ["US", "CA", "GB"],
          validationRules: ["ISO 3166-1 alpha-2"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "pos_entry_mode",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Point-of-sale entry mode",
          sampleValues: ["CHIP", "SWIPE", "CONTACTLESS", "ECOMMERCE", "MANUAL"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "authorization_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Authorization timestamp (UTC)",
          sampleValues: ["2025-01-15T14:22:15.123Z"],
          validationRules: ["ISO 8601 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "fraud_score",
          dataType: "INTEGER",
          nullable: true,
          description: "Real-time fraud score (0-999)",
          sampleValues: ["125", "750"],
          validationRules: ["Range: 0-999"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "card_present_flag",
          dataType: "BOOLEAN",
          nullable: false,
          description: "Indicates if card was physically present",
          sampleValues: ["true", "false"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
  ],
};

// ============================================================================
// LOAN ORIGINATION SYSTEM - SOURCE SYSTEM
// ============================================================================

export const loanOriginationSystem: SourceSystem = {
  sourceSystemId: "los-001",
  sourceSystemCode: "LOS",
  sourceSystemName: "Loan Origination System",
  vendor: "nCino/Fiserv",
  productName: "nCino Bank Operating System",
  version: "2024.2",

  systemType: "LOAN_ORIGINATION",
  criticality: "CRITICAL",

  integrationType: "BATCH_FILE",
  dataFormat: "PARQUET",
  connectionDetails: {
    protocol: "SFTP",
    host: "sftp-los-prod.bank.internal",
    port: 22,
    endpoint: "/los/daily-extracts",
    authMethod: "SSH Key",
  },

  refreshFrequency: "Daily EOD batch + Real-time webhook for status changes",
  avgDailyVolume: "~50K applications, ~10K decisions",
  retentionPeriod: "10 years",
  sla: {
    availability: "99.9% uptime",
    latency: "EOD batch by 2 AM",
    refreshCadence: "Daily batch",
  },

  domains: [
    "loans-retail",
    "loans-commercial",
    "customer-retail",
    "customer-commercial",
    "risk",
    "compliance",
  ],
  dataTypes: [
    "Loan Applications",
    "Credit Decisions",
    "Underwriting Data",
    "Collateral Information",
    "Document Management",
    "Credit Bureau Pulls",
    "Origination Metrics",
    "Application Workflow Status",
    "Closing/Funding Data",
  ],
  keyEntities: [
    "Applications",
    "Decisions",
    "Collateral",
    "Documents",
    "Underwriting",
  ],

  primaryContact: "Lending Operations Manager",
  supportTeam: "nCino Support + Internal LOS Team",
  documentation: "https://help.ncino.com/",
  cost: "$500K+ annually",

  sourceSchemas: [
    {
      schemaName: "LOAN_APPLICATION",
      fileName: "loan_applications_daily_YYYYMMDD.parquet",
      description: "Daily extract of loan applications (all stages)",
      primaryKey: ["application_id"],
      fields: [
        {
          sourceFieldName: "application_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Unique loan application identifier",
          sampleValues: ["LOS-APP-20250115-001234", "LOS-APP-20250115-005678"],
          validationRules: ["UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Applicant customer ID",
          sampleValues: ["CUST-0000123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "loan_type",
          dataType: "STRING",
          length: 30,
          nullable: false,
          description: "Type of loan",
          sampleValues: [
            "MORTGAGE",
            "AUTO_LOAN",
            "PERSONAL_LOAN",
            "HOME_EQUITY",
            "BUSINESS_LOAN",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "loan_purpose",
          dataType: "STRING",
          length: 50,
          nullable: true,
          description: "Purpose of loan",
          sampleValues: [
            "HOME_PURCHASE",
            "REFINANCE",
            "DEBT_CONSOLIDATION",
            "BUSINESS_EXPANSION",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "requested_amount",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Requested loan amount",
          sampleValues: ["250000.00", "50000.00"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "approved_amount",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Approved loan amount",
          sampleValues: ["250000.00", "45000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "interest_rate",
          dataType: "DECIMAL",
          precision: 7,
          scale: 4,
          nullable: true,
          description: "Approved interest rate (%)",
          sampleValues: ["4.2500", "6.7500"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "loan_term_months",
          dataType: "INTEGER",
          nullable: true,
          description: "Loan term in months",
          sampleValues: ["360", "60", "120"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "application_status",
          dataType: "STRING",
          length: 30,
          nullable: false,
          description: "Current application status",
          sampleValues: [
            "SUBMITTED",
            "UNDERWRITING",
            "APPROVED",
            "DECLINED",
            "FUNDED",
            "WITHDRAWN",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "submission_date",
          dataType: "DATE",
          nullable: false,
          description: "Application submission date",
          sampleValues: ["2025-01-10"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "decision_date",
          dataType: "DATE",
          nullable: true,
          description: "Credit decision date",
          sampleValues: ["2025-01-12"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "funding_date",
          dataType: "DATE",
          nullable: true,
          description: "Loan funding date",
          sampleValues: ["2025-01-20"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "credit_score",
          dataType: "INTEGER",
          nullable: true,
          description: "Applicant credit score (FICO)",
          sampleValues: ["750", "680"],
          validationRules: ["Range: 300-850"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "debt_to_income_ratio",
          dataType: "DECIMAL",
          precision: 5,
          scale: 2,
          nullable: true,
          description: "Debt-to-income ratio (%)",
          sampleValues: ["28.50", "42.00"],
          validationRules: ["Range: 0-100"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "loan_to_value_ratio",
          dataType: "DECIMAL",
          precision: 5,
          scale: 2,
          nullable: true,
          description: "Loan-to-value ratio (%) for secured loans",
          sampleValues: ["80.00", "95.00"],
          validationRules: ["Range: 0-100"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "collateral_type",
          dataType: "STRING",
          length: 30,
          nullable: true,
          description: "Type of collateral",
          sampleValues: ["REAL_ESTATE", "VEHICLE", "EQUIPMENT", "INVENTORY"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "collateral_value",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: true,
          description: "Appraised collateral value",
          sampleValues: ["350000.00", "25000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "underwriter_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Assigned underwriter employee ID",
          sampleValues: ["EMP-123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "decline_reason",
          dataType: "STRING",
          length: 255,
          nullable: true,
          description: "Reason for decline (if applicable)",
          sampleValues: [
            "Insufficient Income",
            "Low Credit Score",
            "High DTI Ratio",
          ],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
  ],
};

// ============================================================================
// EXPERIAN CREDIT BUREAU - SOURCE SYSTEM
// ============================================================================

export const experianCreditBureau: SourceSystem = {
  sourceSystemId: "experian-001",
  sourceSystemCode: "EXPERIAN",
  sourceSystemName: "Experian Credit Bureau",
  vendor: "Experian",
  productName: "Experian Connect API",
  version: "3.0",

  systemType: "CREDIT_BUREAU",
  criticality: "CRITICAL",

  integrationType: "API_REST",
  dataFormat: "JSON",
  connectionDetails: {
    protocol: "HTTPS",
    host: "api.experian.com",
    port: 443,
    endpoint: "/consumerservices/v3/credit-report",
    authMethod: "OAuth2 + Client Certificate",
  },

  refreshFrequency: "On-demand (per credit inquiry)",
  avgDailyVolume: "~30K credit pulls",
  retentionPeriod: "7 years",
  sla: {
    availability: "99.9% uptime",
    latency: "<3s response time",
    refreshCadence: "Real-time on-demand",
  },

  domains: [
    "loans-retail",
    "loans-commercial",
    "cards-retail",
    "risk",
    "customer-retail",
  ],
  dataTypes: [
    "Credit Reports",
    "Credit Scores (FICO, VantageScore)",
    "Trade Lines",
    "Payment History",
    "Credit Inquiries",
    "Public Records",
    "Collections",
    "Credit Utilization",
    "Fraud Alerts",
  ],
  keyEntities: [
    "Credit Reports",
    "Trade Lines",
    "Scores",
    "Inquiries",
    "Public Records",
  ],

  primaryContact: "Credit Risk Manager",
  supportTeam: "Experian Support (1-888-XXX-XXXX)",
  documentation: "https://developer.experian.com/credit-reports",
  cost: "$2-5 per pull",

  sourceSchemas: [
    {
      schemaName: "CREDIT_REPORT",
      apiEndpoint: "/consumerservices/v3/credit-report",
      description: "Consumer credit report with scores and trade lines",
      primaryKey: ["inquiry_id"],
      fields: [
        {
          sourceFieldName: "inquiry_id",
          dataType: "STRING",
          length: 50,
          nullable: false,
          description: "Unique credit inquiry identifier",
          sampleValues: [
            "EXP-INQ-2025011514221234",
            "EXP-INQ-2025011515331234",
          ],
          validationRules: ["UNIQUE"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "customer_id",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Internal customer identifier",
          sampleValues: ["CUST-0000123456"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "application_id",
          dataType: "STRING",
          length: 20,
          nullable: true,
          description: "Associated loan/card application ID",
          sampleValues: ["LOS-APP-20250115-001234"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "inquiry_type",
          dataType: "STRING",
          length: 20,
          nullable: false,
          description: "Type of credit inquiry",
          sampleValues: ["HARD", "SOFT"],
          validationRules: ["ENUM: HARD, SOFT"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "inquiry_timestamp",
          dataType: "TIMESTAMP",
          nullable: false,
          description: "Credit pull timestamp",
          sampleValues: ["2025-01-15T14:22:15Z"],
          validationRules: ["ISO 8601 format"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "fico_score_8",
          dataType: "INTEGER",
          nullable: true,
          description: "FICO Score 8 (300-850)",
          sampleValues: ["750", "680"],
          validationRules: ["Range: 300-850"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "vantage_score_3",
          dataType: "INTEGER",
          nullable: true,
          description: "VantageScore 3.0 (300-850)",
          sampleValues: ["745", "675"],
          validationRules: ["Range: 300-850"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "score_factors",
          dataType: "ARRAY<STRING>",
          nullable: true,
          description: "Key factors affecting credit score",
          sampleValues: ['["HIGH_CREDIT_UTILIZATION","RECENT_DELINQUENCIES"]'],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "total_trade_lines",
          dataType: "INTEGER",
          nullable: false,
          description: "Total number of trade lines",
          sampleValues: ["15", "8"],
          validationRules: ["> 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "open_trade_lines",
          dataType: "INTEGER",
          nullable: false,
          description: "Number of open/active trade lines",
          sampleValues: ["12", "6"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "total_revolving_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Total revolving credit balance",
          sampleValues: ["15000.00", "5000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "total_revolving_limit",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Total revolving credit limit",
          sampleValues: ["50000.00", "20000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "credit_utilization_ratio",
          dataType: "DECIMAL",
          precision: 5,
          scale: 2,
          nullable: false,
          description: "Credit utilization ratio (%)",
          sampleValues: ["30.00", "25.00"],
          validationRules: ["Range: 0-100"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "total_installment_balance",
          dataType: "DECIMAL",
          precision: 18,
          scale: 2,
          nullable: false,
          description: "Total installment loan balance",
          sampleValues: ["200000.00", "15000.00"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "delinquent_accounts_count",
          dataType: "INTEGER",
          nullable: false,
          description: "Number of delinquent accounts",
          sampleValues: ["0", "1"],
          validationRules: [">= 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "public_records_count",
          dataType: "INTEGER",
          nullable: false,
          description:
            "Number of public records (bankruptcies, liens, judgments)",
          sampleValues: ["0", "1"],
          validationRules: [">= 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "inquiries_last_6_months",
          dataType: "INTEGER",
          nullable: false,
          description: "Number of hard inquiries in last 6 months",
          sampleValues: ["2", "0"],
          validationRules: [">= 0"],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "oldest_trade_line_date",
          dataType: "DATE",
          nullable: true,
          description: "Date of oldest trade line (credit history length)",
          sampleValues: ["2010-05-15"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "fraud_alert_flag",
          dataType: "BOOLEAN",
          nullable: false,
          description: "Indicates if fraud alert is on file",
          sampleValues: ["false", "true"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
        {
          sourceFieldName: "credit_freeze_flag",
          dataType: "BOOLEAN",
          nullable: false,
          description: "Indicates if credit report is frozen",
          sampleValues: ["false", "true"],
          validationRules: [],
          piiFlag: false,
          encryptionRequired: false,
        },
      ],
    },
  ],
};

// Export all expanded source systems
export const expandedSourceSystems: SourceSystem[] = [
  coreBankingSystem,
  cardManagementSystem,
  loanOriginationSystem,
  experianCreditBureau,
];

// ============================================================================
// CORE BANKING - SOURCE TO TARGET MAPPINGS
// ============================================================================

export const coreBankingCustomerMappings: FieldMapping[] = [
  {
    sourceSystem: "CORE-BANK",
    sourceSchema: "CUSTOMER_MASTER",
    sourceField: "customer_id",
    sourceDataType: "STRING",

    bronzeTable: "bronze.core_customer_master",
    bronzeField: "customer_id",
    bronzeDataType: "STRING",

    silverTable: "silver.customer_master",
    silverField: "customer_id",
    silverDataType: "STRING",

    goldTable: "gold.dim_customer",
    goldField: "customer_key",
    goldDataType: "BIGINT",

    transformationType: "DIRECT_MAPPING",
    transformationLogic:
      "Bronze: Direct copy. Silver: Deduplication + SCD Type 2. Gold: Surrogate key generation",
    transformationSQL: `
      -- Bronze (Direct load)
      SELECT * FROM SOURCE.CORE_CUSTOMER
      
      -- Silver (SCD Type 2)
      MERGE INTO silver.customer_master AS target
      USING (
        SELECT *, 
          MD5(CONCAT_WS('||', tax_id, first_name, last_name, email_address)) AS record_hash
        FROM bronze.core_customer_master
      ) AS source
      ON target.customer_id = source.customer_id
        AND target.current_flag = TRUE
      WHEN MATCHED AND target.record_hash != source.record_hash THEN
        UPDATE SET current_flag = FALSE, end_date = CURRENT_DATE
      WHEN NOT MATCHED THEN
        INSERT VALUES (source.*, TRUE, CURRENT_DATE, NULL)
      
      -- Gold (Dimension with surrogate key)
      SELECT 
        SHA2(customer_id, 256) AS customer_key,
        customer_id,
        customer_type,
        customer_segment,
        -- PII fields masked/tokenized
        CONCAT('****', RIGHT(tax_id, 4)) AS tax_id_masked,
        first_name,
        last_name,
        customer_status,
        customer_since_date,
        risk_rating
      FROM silver.customer_master
      WHERE current_flag = TRUE
    `,

    businessDefinition: "Unique customer identifier in core banking system",
    dataQualityRules: [
      "NOT NULL",
      "UNIQUE",
      "Pattern: CUST-[0-9]{10}",
      "Must exist in source system",
    ],

    sampleTransformation: [
      {
        sourceValue: "CUST-0000123456",
        targetValue: "CUST-0000123456  customer_key: 8a7f3d...",
      },
    ],
  },
  {
    sourceSystem: "CORE-BANK",
    sourceSchema: "CUSTOMER_MASTER",
    sourceField: "tax_id",
    sourceDataType: "STRING",

    bronzeTable: "bronze.core_customer_master",
    bronzeField: "tax_id_encrypted",
    bronzeDataType: "STRING",

    silverTable: "silver.customer_master",
    silverField: "tax_id_masked",
    silverDataType: "STRING",

    goldTable: "gold.dim_customer",
    goldField: "tax_id_token",
    goldDataType: "STRING",

    transformationType: "ENCRYPTION",
    transformationLogic:
      "Bronze: AES-256 encryption. Silver: Mask (show last 4). Gold: Tokenized hash",
    transformationSQL: `
      -- Bronze (Encryption)
      AES_ENCRYPT(SOURCE.tax_id, SECRET_KEY) AS tax_id_encrypted
      
      -- Silver (Masking)
      CONCAT('***-**-', RIGHT(AES_DECRYPT(tax_id_encrypted, SECRET_KEY), 4)) AS tax_id_masked
      
      -- Gold (Tokenization)
      SHA2(AES_DECRYPT(tax_id_encrypted, SECRET_KEY), 256) AS tax_id_token
    `,

    businessDefinition:
      "Customer tax identification number (SSN/EIN) - PII sensitive",
    dataQualityRules: [
      "NOT NULL",
      "UNIQUE per customer",
      "Encrypted at rest (AES-256)",
      "Masked in Silver (show last 4)",
      "Tokenized in Gold",
      "PII Flag: TRUE",
      "Format: SSN (9 digits) or EIN (9 digits)",
    ],

    sampleTransformation: [
      {
        sourceValue: "123456789",
        targetValue: "***-**-6789 (masked) | a3f8d9... (token)",
      },
    ],
  },
];

export const coreBankingAccountMappings: FieldMapping[] = [
  {
    sourceSystem: "CORE-BANK",
    sourceSchema: "ACCOUNT_MASTER",
    sourceField: "current_balance",
    sourceDataType: "DECIMAL",

    bronzeTable: "bronze.core_account_master",
    bronzeField: "current_balance",
    bronzeDataType: "DECIMAL(18,2)",

    silverTable: "silver.account_balances",
    silverField: "current_balance",
    silverDataType: "DECIMAL(18,2)",

    goldTable: "gold.fact_account_balances",
    goldField: "current_balance",
    goldDataType: "DECIMAL(18,2)",

    transformationType: "TYPE_CONVERSION",
    transformationLogic:
      "Bronze: Cast to DECIMAL(18,2). Silver: Validate + cleanse. Gold: Fact measure",
    transformationSQL: `
      -- Bronze
      CAST(SOURCE.current_balance AS DECIMAL(18,2)) AS current_balance
      
      -- Silver (Validation)
      SELECT 
        account_id,
        CASE 
          WHEN current_balance IS NULL THEN 0.00
          ELSE current_balance
        END AS current_balance,
        business_date
      FROM bronze.core_account_master
      
      -- Gold (Daily snapshot fact)
      SELECT 
        account_key,
        date_key,
        current_balance,
        available_balance,
        ledger_balance,
        currency_code
      FROM silver.account_balances
    `,

    businessDefinition: "Current account balance (real-time)",
    dataQualityRules: [
      "NOT NULL",
      "Precision: 18 digits, 2 decimal places",
      "Can be negative (for liability accounts or overdrafts)",
    ],

    sampleTransformation: [
      { sourceValue: "5432.10", targetValue: "5432.10" },
      { sourceValue: "-250.00", targetValue: "-250.00" },
    ],
  },
];

export const coreBankingTransactionMappings: FieldMapping[] = [
  {
    sourceSystem: "CORE-BANK",
    sourceSchema: "TRANSACTION_HISTORY",
    sourceField: "transaction_amount",
    sourceDataType: "DECIMAL",

    bronzeTable: "bronze.core_transactions",
    bronzeField: "transaction_amount",
    bronzeDataType: "DECIMAL(18,2)",

    silverTable: "silver.transactions_cleansed",
    silverField: "signed_transaction_amount",
    silverDataType: "DECIMAL(18,2)",

    goldTable: "gold.fact_transactions",
    goldField: "transaction_amount",
    goldDataType: "DECIMAL(18,2)",

    transformationType: "DERIVED",
    transformationLogic:
      "Bronze: Direct copy. Silver: Apply +/- sign based on DR/CR. Gold: Measure",
    transformationSQL: `
      -- Bronze
      transaction_amount
      
      -- Silver (Apply sign)
      SELECT 
        transaction_id,
        account_id,
        CASE debit_credit_indicator
          WHEN 'DR' THEN -1 * transaction_amount
          WHEN 'CR' THEN transaction_amount
        END AS signed_transaction_amount,
        transaction_date
      FROM bronze.core_transactions
      
      -- Gold (Fact)
      SELECT 
        transaction_key,
        account_key,
        date_key,
        transaction_amount,
        transaction_type_key,
        channel_key
      FROM silver.transactions_cleansed
    `,

    businessDefinition:
      "Transaction amount (absolute value in source, signed in silver/gold)",
    dataQualityRules: [
      "NOT NULL",
      "MUST be > 0 in source",
      "Apply sign based on DR/CR indicator",
      "Precision: 18,2",
    ],

    sampleTransformation: [
      { sourceValue: "100.00 (DR)", targetValue: "-100.00 (withdrawal)" },
      { sourceValue: "100.00 (CR)", targetValue: "100.00 (deposit)" },
    ],
  },
];

// ============================================================================
// DATA LINEAGE - EXPANDED
// ============================================================================

export const coreBankingLineage: DataLineage[] = [
  {
    domainId: "customer-core",
    entity: "Customer",

    sourceSystem: "CORE-BANK",
    sourceSchema: "CUSTOMER_MASTER",
    sourceField: "customer_id",
    bronzeTable: "bronze.core_customer_master",
    bronzeField: "customer_id",
    bronzeLoadType: "CDC",

    silverTable: "silver.customer_master",
    silverField: "customer_id",
    silverTransformation: "SCD Type 2 with record hashing, PII masking",

    goldTable: "gold.dim_customer",
    goldField: "customer_key",
    goldAggregation: "Surrogate key generation, current records only",

    dataLineagePath:
      "Core Banking CDC  bronze.core_customer_master  silver.customer_master  gold.dim_customer",
    lastUpdated: "2025-01-15",
    certifiedFlag: true,
  },
  {
    domainId: "deposits-retail",
    entity: "Account Balance",

    sourceSystem: "CORE-BANK",
    sourceSchema: "ACCOUNT_MASTER",
    sourceField: "current_balance",
    bronzeTable: "bronze.core_account_master",
    bronzeField: "current_balance",
    bronzeLoadType: "CDC",

    silverTable: "silver.account_balances",
    silverField: "current_balance",
    silverTransformation: "Daily snapshots, validation, cleansing",

    goldTable: "gold.fact_account_balances",
    goldField: "current_balance",
    goldAggregation: "Daily balance snapshot fact table",

    dataLineagePath:
      "Core Banking CDC  bronze.core_account_master  silver.account_balances  gold.fact_account_balances",
    lastUpdated: "2025-01-15",
    certifiedFlag: true,
  },
];

export const cardSystemLineage: DataLineage[] = [
  {
    domainId: "cards-retail",
    entity: "Card Authorization",

    sourceSystem: "CARD-SYS",
    sourceSchema: "CARD_AUTHORIZATION",
    sourceField: "authorization_id",
    bronzeTable: "bronze.card_authorizations",
    bronzeField: "authorization_id",
    bronzeLoadType: "STREAMING",

    silverTable: "silver.card_authorizations_enriched",
    silverField: "authorization_id",
    silverTransformation:
      "Real-time enrichment with merchant data, fraud scores",

    goldTable: "gold.fact_card_authorizations",
    goldField: "authorization_key",
    goldAggregation: "Transactional fact with dimensions",

    dataLineagePath:
      "Card System Events  bronze.card_authorizations  silver.card_authorizations_enriched  gold.fact_card_authorizations",
    lastUpdated: "2025-01-15",
    certifiedFlag: true,
  },
];

export const losLineage: DataLineage[] = [
  {
    domainId: "loans-retail",
    entity: "Loan Application",

    sourceSystem: "LOS",
    sourceSchema: "LOAN_APPLICATION",
    sourceField: "application_id",
    bronzeTable: "bronze.los_applications",
    bronzeField: "application_id",
    bronzeLoadType: "BATCH",

    silverTable: "silver.loan_applications",
    silverField: "application_id",
    silverTransformation: "Daily batch with SCD Type 2 for status tracking",

    goldTable: "gold.fact_loan_applications",
    goldField: "application_key",
    goldAggregation: "Application lifecycle fact table",

    dataLineagePath:
      "LOS Daily Batch  bronze.los_applications  silver.loan_applications  gold.fact_loan_applications",
    lastUpdated: "2025-01-15",
    certifiedFlag: true,
  },
];

export const experianLineage: DataLineage[] = [
  {
    domainId: "risk",
    entity: "Credit Score",

    sourceSystem: "EXPERIAN",
    sourceSchema: "CREDIT_REPORT",
    sourceField: "fico_score_8",
    bronzeTable: "bronze.experian_credit_reports",
    bronzeField: "fico_score_8",
    bronzeLoadType: "API",

    silverTable: "silver.credit_scores",
    silverField: "fico_score_8",
    silverTransformation:
      "API response parsing, validation, historical tracking",

    goldTable: "gold.fact_credit_inquiries",
    goldField: "fico_score",
    goldAggregation: "Credit inquiry fact with score history",

    dataLineagePath:
      "Experian API  bronze.experian_credit_reports  silver.credit_scores  gold.fact_credit_inquiries",
    lastUpdated: "2025-01-15",
    certifiedFlag: true,
  },
];

// Consolidated exports
export const expandedLineage: DataLineage[] = [
  ...coreBankingLineage,
  ...cardSystemLineage,
  ...losLineage,
  ...experianLineage,
];
