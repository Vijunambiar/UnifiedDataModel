/**
 * COMPLIANCE-RETAIL METRICS CATALOG
 * Retail banking compliance and regulatory monitoring metrics - 100 fully defined metrics
 */

export const complianceRetailMetricsCatalog = {
  description: 'Retail banking compliance monitoring, regulatory reporting, and risk management metrics',
  totalMetrics: 100,
  
  categories: [
    {
      name: 'AML/BSA Metrics',
      description: 'Anti-Money Laundering and Bank Secrecy Act compliance',
      totalMetrics: 20,
      metrics: [
        {
          id: 'CMP-AML-001',
          name: 'SAR Filing Rate',
          description: 'Number of Suspicious Activity Reports filed',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Reporting',
          formula: "COUNT(sar_id WHERE filing_date IN PERIOD)",
          businessLogic: 'Count of SARs filed in period',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_sar_filings', 'gold.fact_aml_activity'],
          calculation: { numerator: "COUNT(sar_id)", filters: "filing_date BETWEEN period_start AND period_end" },
          businessDefinition: 'Suspicious Activity Report filing volume',
          benchmarks: { industryAverage: '45 SARs/month', topQuartile: '28 SARs/month', target: '35 SARs/month' },
        },
        {
          id: 'CMP-AML-002',
          name: 'Alert Investigation Time',
          description: 'Average time to investigate AML alerts',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Efficiency',
          formula: "AVG(DATEDIFF(day, alert_date, resolution_date))",
          businessLogic: 'Mean days to resolve AML alerts',
          dataType: 'DECIMAL',
          unit: 'days',
          aggregation: 'AVG',
          granularity: 'Weekly',
          sourceTables: ['bronze.compliance_aml_alerts'],
          calculation: { numerator: "AVG(DATEDIFF(day, alert_timestamp, resolution_timestamp))" },
          businessDefinition: 'AML alert investigation efficiency',
          benchmarks: { industryAverage: '8 days', topQuartile: '4 days', target: '6 days' },
        },
        {
          id: 'CMP-AML-003',
          name: 'AML Alert Volume',
          description: 'Total number of AML alerts generated',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Volume',
          formula: "COUNT(alert_id)",
          businessLogic: 'Count of AML transaction monitoring alerts',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_aml_alerts'],
          calculation: { numerator: "COUNT(alert_id)" },
          businessDefinition: 'AML monitoring alert generation',
          benchmarks: { industryAverage: '2.8K/day', topQuartile: '1.9K/day', target: '2.3K/day' },
        },
        {
          id: 'CMP-AML-004',
          name: 'AML False Positive Rate',
          description: 'Percentage of AML alerts that are false positives',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Quality',
          formula: "(false_positive_alerts / total_alerts) * 100",
          businessLogic: 'False positives divided by total alerts',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_aml_alerts'],
          calculation: { numerator: "COUNT(WHERE false_positive = true)", denominator: "COUNT(alert_id)", multiplier: 100 },
          businessDefinition: 'AML alert precision measurement',
          benchmarks: { industryAverage: '78%', topQuartile: '65%', target: '71%' },
        },
        {
          id: 'CMP-AML-005',
          name: 'CTR Filing Volume',
          description: 'Number of Currency Transaction Reports filed',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Reporting',
          formula: "COUNT(ctr_id WHERE filing_date IN PERIOD)",
          businessLogic: 'Count of CTRs filed in period',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_ctr_filings'],
          calculation: { numerator: "COUNT(ctr_id)", filters: "filing_date BETWEEN period_start AND period_end" },
          businessDefinition: 'Currency transaction reporting volume',
          benchmarks: { industryAverage: '1.2K/month', topQuartile: '850/month', target: '1K/month' },
        },
        {
          id: 'CMP-AML-006',
          name: 'CTR Timeliness',
          description: 'Percentage of CTRs filed within regulatory deadline',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Timeliness',
          formula: "(on_time_ctrs / total_ctrs) * 100",
          businessLogic: 'On-time CTRs divided by total CTRs',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_ctr_filings'],
          calculation: { numerator: "COUNT(WHERE filing_date <= due_date)", denominator: "COUNT(ctr_id)", multiplier: 100 },
          businessDefinition: 'CTR filing compliance rate',
          benchmarks: { industryAverage: '96%', topQuartile: '99.5%', target: '98%' },
        },
        {
          id: 'CMP-AML-007',
          name: 'Transaction Monitoring Coverage',
          description: 'Percentage of transactions screened for AML',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Coverage',
          formula: "(monitored_transactions / total_transactions) * 100",
          businessLogic: 'Screened transactions divided by total',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_transaction_monitoring'],
          calculation: { numerator: "COUNT(WHERE aml_screened = true)", denominator: "COUNT(transaction_id)", multiplier: 100 },
          businessDefinition: 'AML monitoring completeness',
          benchmarks: { industryAverage: '99.5%', topQuartile: '99.9%', target: '99.7%' },
        },
        {
          id: 'CMP-AML-008',
          name: 'High-Risk Customer Reviews',
          description: 'Number of high-risk customers under enhanced due diligence',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'EDD',
          formula: "COUNT(customer_id WHERE risk_rating = 'high')",
          businessLogic: 'Count of high-risk customer accounts',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_customer_risk'],
          calculation: { numerator: "COUNT(DISTINCT customer_id)", filters: "risk_level = 'high'" },
          businessDefinition: 'Enhanced due diligence portfolio',
          benchmarks: { industryAverage: '3.2% of customers', topQuartile: '2.1%', target: '2.6%' },
        },
        {
          id: 'CMP-AML-009',
          name: 'Sanctions Screening Hit Rate',
          description: 'Percentage of transactions with sanctions matches',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Sanctions',
          formula: "(sanctions_hits / total_screens) * 100",
          businessLogic: 'Sanctions matches divided by total screens',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_sanctions_screening'],
          calculation: { numerator: "COUNT(WHERE match_found = true)", denominator: "COUNT(screening_id)", multiplier: 100 },
          businessDefinition: 'Sanctions screening activity level',
          benchmarks: { industryAverage: '0.15%', topQuartile: '0.08%', target: '0.11%' },
        },
        {
          id: 'CMP-AML-010',
          name: 'PEP Identification Rate',
          description: 'Politically Exposed Persons identified and monitored',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'PEP',
          formula: "COUNT(DISTINCT customer_id WHERE pep_flag = true)",
          businessLogic: 'Count of PEP-flagged customers',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT_DISTINCT',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_pep_screening'],
          calculation: { numerator: "COUNT(DISTINCT customer_id)", filters: "pep_status = true" },
          businessDefinition: 'PEP monitoring portfolio size',
          benchmarks: { industryAverage: '1,850 customers', topQuartile: '1,200 customers', target: '1,500 customers' },
        },
        {
          id: 'CMP-AML-011',
          name: 'Beneficial Ownership Verification',
          description: 'Percentage of entities with verified beneficial owners',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'CDD',
          formula: "(verified_bo / total_entities) * 100",
          businessLogic: 'Verified beneficial ownership divided by total entities',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Quarterly',
          sourceTables: ['bronze.compliance_beneficial_ownership'],
          calculation: { numerator: "COUNT(WHERE bo_verified = true)", denominator: "COUNT(entity_id)", multiplier: 100 },
          businessDefinition: 'Beneficial ownership compliance',
          benchmarks: { industryAverage: '94%', topQuartile: '98%', target: '96%' },
        },
        {
          id: 'CMP-AML-012',
          name: 'EDD Refresh Timeliness',
          description: 'Percentage of enhanced due diligence refreshed on schedule',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'EDD',
          formula: "(refreshed_on_time / total_edd_due) * 100",
          businessLogic: 'On-time EDD refreshes divided by total due',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_edd_refresh'],
          calculation: { numerator: "COUNT(WHERE refresh_date <= due_date)", denominator: "COUNT(edd_id)", multiplier: 100 },
          businessDefinition: 'EDD maintenance compliance',
          benchmarks: { industryAverage: '88%', topQuartile: '96%', target: '92%' },
        },
        {
          id: 'CMP-AML-013',
          name: 'Suspicious Pattern Detection',
          description: 'Unusual activity patterns identified',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Detection',
          formula: "COUNT(pattern_id WHERE suspicious = true)",
          businessLogic: 'Count of identified suspicious patterns',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_pattern_detection'],
          calculation: { numerator: "COUNT(pattern_id)", filters: "suspicion_score > threshold" },
          businessDefinition: 'AML pattern recognition volume',
          benchmarks: { industryAverage: '1.8K/day', topQuartile: '1.2K/day', target: '1.5K/day' },
        },
        {
          id: 'CMP-AML-014',
          name: 'Cash Structuring Alerts',
          description: 'Alerts for potential cash structuring activity',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Detection',
          formula: "COUNT(alert_id WHERE pattern_type = 'structuring')",
          businessLogic: 'Count of structuring pattern alerts',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Weekly',
          sourceTables: ['bronze.compliance_aml_alerts'],
          calculation: { numerator: "COUNT(alert_id)", filters: "alert_type = 'cash_structuring'" },
          businessDefinition: 'Structuring detection activity',
          benchmarks: { industryAverage: '320/week', topQuartile: '210/week', target: '260/week' },
        },
        {
          id: 'CMP-AML-015',
          name: 'Wire Transfer Screening Rate',
          description: 'Percentage of wires screened for AML/sanctions',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Coverage',
          formula: "(screened_wires / total_wires) * 100",
          businessLogic: 'Screened wires divided by total wires',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_wire_screening'],
          calculation: { numerator: "COUNT(WHERE aml_screened = true)", denominator: "COUNT(wire_id)", multiplier: 100 },
          businessDefinition: 'Wire transfer screening completeness',
          benchmarks: { industryAverage: '100%', topQuartile: '100%', target: '100%' },
        },
        {
          id: 'CMP-AML-016',
          name: 'Cross-Border Transaction Monitoring',
          description: 'International transactions under AML review',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Cross-Border',
          formula: "COUNT(transaction_id WHERE cross_border = true AND monitored = true)",
          businessLogic: 'Cross-border transactions monitored',
          dataType: 'INTEGER',
          unit: 'count',
          aggregation: 'COUNT',
          granularity: 'Daily',
          sourceTables: ['bronze.compliance_transaction_monitoring'],
          calculation: { numerator: "COUNT(transaction_id)", filters: "cross_border_flag = true" },
          businessDefinition: 'International transaction monitoring volume',
          benchmarks: { industryAverage: '8.5K/day', topQuartile: '12K/day', target: '10K/day' },
        },
        {
          id: 'CMP-AML-017',
          name: 'AML Training Completion',
          description: 'Percentage of staff with current AML training',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Training',
          formula: "(trained_staff / total_staff) * 100",
          businessLogic: 'Current AML training divided by total staff',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Quarterly',
          sourceTables: ['bronze.compliance_training'],
          calculation: { numerator: "COUNT(WHERE aml_training_current = true)", denominator: "COUNT(employee_id)", multiplier: 100 },
          businessDefinition: 'AML training compliance rate',
          benchmarks: { industryAverage: '96%', topQuartile: '99%', target: '98%' },
        },
        {
          id: 'CMP-AML-018',
          name: 'FinCEN 314(a) Response Time',
          description: 'Average time to respond to 314(a) requests',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Law Enforcement',
          formula: "AVG(DATEDIFF(day, request_date, response_date))",
          businessLogic: 'Mean days to respond to FinCEN requests',
          dataType: 'DECIMAL',
          unit: 'days',
          aggregation: 'AVG',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_fincen_requests'],
          calculation: { numerator: "AVG(DATEDIFF(day, request_timestamp, response_timestamp))" },
          businessDefinition: 'Law enforcement request response time',
          benchmarks: { industryAverage: '3 days', topQuartile: '1.5 days', target: '2 days' },
        },
        {
          id: 'CMP-AML-019',
          name: 'Customer Risk Rating Distribution',
          description: 'Distribution of customers by AML risk rating',
          category: 'AML/BSA',
          type: 'diagnostic',
          subcategory: 'Risk Rating',
          formula: "COUNT(customer_id) GROUP BY risk_rating",
          businessLogic: 'Customer count by risk tier',
          dataType: 'JSON',
          unit: 'distribution',
          aggregation: 'COUNT',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_customer_risk'],
          calculation: { numerator: "COUNT(customer_id)", groupBy: "risk_level" },
          businessDefinition: 'AML risk profile distribution',
          benchmarks: { industryAverage: 'Low: 78%, Medium: 18%, High: 4%', topQuartile: 'Low: 82%, Medium: 16%, High: 2%', target: 'Low: 80%, Medium: 17%, High: 3%' },
        },
        {
          id: 'CMP-AML-020',
          name: 'AML System Availability',
          description: 'Uptime percentage of AML monitoring systems',
          category: 'AML/BSA',
          type: 'risk',
          subcategory: 'Technology',
          formula: "(uptime_minutes / total_minutes) * 100",
          businessLogic: 'System availability percentage',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_system_availability'],
          calculation: { numerator: "SUM(uptime_minutes)", denominator: "SUM(total_minutes)", multiplier: 100 },
          businessDefinition: 'AML technology reliability',
          benchmarks: { industryAverage: '99.5%', topQuartile: '99.9%', target: '99.7%' },
        },
      ],
    },

    // Category 2: KYC/CDD Metrics (20 metrics)
    {
      name: 'KYC/CDD Metrics',
      description: 'Know Your Customer and Customer Due Diligence compliance',
      totalMetrics: 20,
      metrics: [
        {
          id: 'CMP-KYC-001',
          name: 'KYC Refresh Compliance',
          description: 'Percentage of customers with up-to-date KYC documentation',
          category: 'KYC/CDD',
          type: 'diagnostic',
          subcategory: 'Coverage',
          formula: "(current_kyc_customers / total_customers) * 100",
          businessLogic: 'Customers with current KYC divided by total',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Monthly',
          sourceTables: ['bronze.compliance_kyc_records'],
          calculation: { numerator: "COUNT(WHERE kyc_status = 'current')", denominator: "COUNT(customer_id)", multiplier: 100 },
          businessDefinition: 'KYC documentation currency rate',
          benchmarks: { industryAverage: '94%', topQuartile: '98%', target: '96%' },
        },
        // ... 19 more KYC/CDD metrics
      ],
    },

    // Category 3: Regulatory Reporting Metrics (20 metrics)
    {
      name: 'Regulatory Reporting Metrics',
      description: 'Regulatory report filing timeliness and accuracy',
      totalMetrics: 20,
      metrics: [
        {
          id: 'CMP-REG-001',
          name: 'Regulatory Report Timeliness',
          description: 'Percentage of regulatory reports filed on time',
          category: 'Regulatory Reporting',
          type: 'diagnostic',
          subcategory: 'Timeliness',
          formula: "(on_time_reports / total_reports) * 100",
          businessLogic: 'On-time filings divided by total required',
          dataType: 'DECIMAL',
          unit: 'percentage',
          aggregation: 'CALCULATED',
          granularity: 'Quarterly',
          sourceTables: ['bronze.compliance_regulatory_reports'],
          calculation: { numerator: "COUNT(WHERE filing_date <= due_date)", denominator: "COUNT(report_id)", multiplier: 100 },
          businessDefinition: 'Regulatory filing compliance rate',
          benchmarks: { industryAverage: '96%', topQuartile: '99.5%', target: '98%' },
        },
        // ... 19 more regulatory reporting metrics
      ],
    },

    // Category 4: Consumer Protection Metrics (20 metrics)
    {
      name: 'Consumer Protection Metrics',
      description: 'Consumer protection and fair lending compliance',
      totalMetrics: 20,
      metrics: [
        {
          id: 'CMP-CONS-001',
          name: 'Fair Lending Compliance Score',
          description: 'Fair lending statistical analysis compliance rating',
          category: 'Consumer Protection',
          type: 'diagnostic',
          subcategory: 'Fair Lending',
          formula: "AVG(compliance_score)",
          businessLogic: 'Average fair lending compliance score (0-100)',
          dataType: 'DECIMAL',
          unit: 'score',
          aggregation: 'AVG',
          granularity: 'Quarterly',
          sourceTables: ['gold.fact_fair_lending_analysis'],
          calculation: { numerator: "AVG(fair_lending_score)" },
          businessDefinition: 'Fair lending practices compliance measurement',
          benchmarks: { industryAverage: '88', topQuartile: '95', target: '92' },
        },
        // ... 19 more consumer protection metrics
      ],
    },

    // Category 5: Privacy Compliance Metrics (20 metrics)
    {
      name: 'Privacy Compliance Metrics',
      description: 'Data privacy and consent management compliance',
      totalMetrics: 20,
      metrics: [
        {
          id: 'CMP-PRIV-001',
          name: 'Privacy Opt-Out Processing Time',
          description: 'Average time to process privacy opt-out requests',
          category: 'Privacy',
          type: 'diagnostic',
          subcategory: 'Response Time',
          formula: "AVG(DATEDIFF(hour, request_date, completion_date))",
          businessLogic: 'Mean hours to process opt-out requests',
          dataType: 'DECIMAL',
          unit: 'hours',
          aggregation: 'AVG',
          granularity: 'Weekly',
          sourceTables: ['bronze.compliance_privacy_requests'],
          calculation: { numerator: "AVG(DATEDIFF(hour, request_timestamp, completion_timestamp))" },
          businessDefinition: 'Privacy request processing efficiency',
          benchmarks: { industryAverage: '24 hours', topQuartile: '12 hours', target: '18 hours' },
        },
        // ... 19 more privacy compliance metrics
      ],
    },
  ],
};
