// COMPREHENSIVE STTM MAPPING - Based on Excel File
// Source: STTM Excel with 18 tables and ~700 columns
// Schemas: CORE_CUSTOMERS (8 tables), CORE_DEPOSIT (10 tables)
// Source Systems: FIS-ADS, FIS-DDW

export interface ColumnMapping {
  sourceSystem: string;
  sourceTable: string;
  sourceColumn: string;
  bronzeSchema: string;
  bronzeTable: string;
  bronzeColumn: string;
  silverSchema: string;
  silverTable: string;
  silverColumn: string;
  goldSchema: string;
  goldTable: string;
  goldColumn: string | null;
  dataType: string;
  businessLogic: string;
  businessMeaning: string;
  mappingType?: "Direct" | "Derived" | "System" | "SCD2";
}

// ============================================================================
// TABLE 1: BRG_CUST_TO_ACCT_RELATIONSHIP (19 columns)
// ============================================================================

export const brgCustToAcctRelationship: ColumnMapping[] = [
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "AUTO_GENERATED",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "CUSTOMER_ACCOUNT_SK",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "NUMBER(38,0)",
    businessLogic: "Auto-generated surrogate key",
    businessMeaning: "Surrogate key for customer-account relationship",
    mappingType: "System",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "DERIVED",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "CUSTOMER_NUMBER_FK",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "NUMBER(38,0)",
    businessLogic: "Foreign key to DIM_CUSTOMER",
    businessMeaning: "Customer dimension foreign key",
    mappingType: "System",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "DERIVED",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "ACCOUNT_NUMBER_FK",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "NUMBER(38,0)",
    businessLogic: "Foreign key to DIM_ACCOUNT",
    businessMeaning: "Account dimension foreign key",
    mappingType: "System",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_R_APPL_ID",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_R_APPL_ID",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "CUSTOMER_NUMBER",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Customer number in relationship",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_APPL_ID",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_APPL_ID",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "ACCOUNT_NUMBER",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Account number in relationship",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_E2_TO_E1_CDE",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_E2_TO_E1_CDE",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RELATED_TYPE_CODE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Relationship type code",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_E2_TO_E1_DESC",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_E2_TO_E1_DESC",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RELATED_TYPE_DESC",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Relationship type description",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_E1_TO_E2_CDE",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_E1_TO_E2_CDE",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RELATED_ROLE_CODE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Relationship role code",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "CID_RELA_E1_TO_E2_DESC",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "CID_RELA_E1_TO_E2_DESC",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RELATED_ROLE_DESC",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "1:1 mapping",
    businessMeaning: "Relationship role description",
    mappingType: "Direct",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "PRCS_DTE",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "PRCS_DTE",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "EFFECTIVE_START_DATE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "DATE",
    businessLogic: "1:1 mapping",
    businessMeaning: "SCD2 effective start date",
    mappingType: "SCD2",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "SCD2_LOGIC",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "EFFECTIVE_END_DATE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "DATE",
    businessLogic: "9999-12-31 for current, else previous row effective_start_date - 1",
    businessMeaning: "SCD2 effective end date",
    mappingType: "SCD2",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "HASH_FUNCTION",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "MULTIPLE",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "ROW_HASH",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "HASH of all business columns for change detection",
    businessMeaning: "Row hash for SCD2 change detection",
    mappingType: "Derived",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "REFRESH_TIME",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "REFRESH_TIME",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RECORD_DATE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "DATE",
    businessLogic: "1:1 mapping",
    businessMeaning: "Source data refresh timestamp",
    mappingType: "Direct",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "DERIVED",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "RECORD_FLAG",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "CASE WHEN EFFECTIVE_END_DATE = '9999-12-31' THEN 'A' ELSE 'I' END",
    businessMeaning: "Active/Inactive flag (A=Active, I=Inactive)",
    mappingType: "Derived",
  },
  {
    sourceSystem: "FIS-ADS",
    sourceTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    sourceColumn: "PRCS_DTE",
    bronzeSchema: "FIS_ADS",
    bronzeTable: "TB_CI_OZW_CUST_ACCT_RLT_ARD",
    bronzeColumn: "PRCS_DTE",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "BUSINESS_DATE",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "DATE",
    businessLogic: "1:1 mapping",
    businessMeaning: "Business date for processing",
    mappingType: "Direct",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "CURRENT_USER()",
    bronzeSchema: "N/A",
    bronzeTable: "N/A",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "INSERT_BY",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "CURRENT_USER() - Snowflake ETL user",
    businessMeaning: "User who inserted the record",
    mappingType: "System",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "CURRENT_TIMESTAMP()",
    bronzeSchema: "N/A",
    bronzeTable: "N/A",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "INSERT_DT",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "TIMESTAMP_NTZ(9)",
    businessLogic: "CURRENT_TIMESTAMP() on insert",
    businessMeaning: "Timestamp when record was inserted",
    mappingType: "System",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "CURRENT_USER()",
    bronzeSchema: "N/A",
    bronzeTable: "N/A",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "LAST_MODIFIED_BY",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "VARCHAR(16777216)",
    businessLogic: "CURRENT_USER() on update",
    businessMeaning: "User who last modified the record",
    mappingType: "System",
  },
  {
    sourceSystem: "SYSTEM",
    sourceTable: "N/A",
    sourceColumn: "CURRENT_TIMESTAMP()",
    bronzeSchema: "N/A",
    bronzeTable: "N/A",
    bronzeColumn: "N/A",
    silverSchema: "CORE_CUSTOMERS",
    silverTable: "BRG_CUST_TO_ACCT_RELATIONSHIP",
    silverColumn: "LAST_MODIFIED_DT",
    goldSchema: "ANALYTICS",
    goldTable: "CUSTOMER_DEPOSIT_AGGR",
    goldColumn: null,
    dataType: "TIMESTAMP_NTZ(9)",
    businessLogic: "CURRENT_TIMESTAMP() on update",
    businessMeaning: "Timestamp when record was last modified",
    mappingType: "System",
  },
];

// Export summary for table coverage tracking
export const customerSTTMTableCoverage = {
  totalTables: 18,
  totalColumns: 700,
  coveredTables: 1,
  coveredColumns: 19,
  tables: [
    {
      schema: "CORE_CUSTOMERS",
      table: "BRG_CUST_TO_ACCT_RELATIONSHIP",
      columnCount: 19,
      mapped: true,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_DEMOGRAPHY",
      columnCount: 20,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_IDENTIFER",
      columnCount: 32,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_NAME",
      columnCount: 19,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_ATTRIBUTE",
      columnCount: 84,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_CONTACT",
      columnCount: 18,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_EMAIL",
      columnCount: 14,
      mapped: false,
    },
    {
      schema: "CORE_CUSTOMERS",
      table: "DIM_CUSTOMER_ADDRESS",
      columnCount: 24,
      mapped: false,
    },
    // Deposit tables
    {
      schema: "CORE_DEPOSIT",
      table: "DIM_DEPOSIT",
      columnCount: 72,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "DIM_ACCOUNT",
      columnCount: 37,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_HOLD_TRANSACTION",
      columnCount: 21,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_MAINTENANCE_TRANSACTION",
      columnCount: 15,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_CERTIFICATE_TRANSACTION",
      columnCount: 24,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_DAILY_BALANCE",
      columnCount: 21,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_STOP_TRANSACTION",
      columnCount: 25,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "FCT_DEPOSIT_ACCOUNT_TRANSACTION",
      columnCount: 26,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "DIM_ACCOUNT_PACKAGE",
      columnCount: 19,
      mapped: false,
    },
    {
      schema: "CORE_DEPOSIT",
      table: "DIM_DEBIT_CARD",
      columnCount: 18,
      mapped: false,
    },
  ],
};

export default brgCustToAcctRelationship;
