// ============================================================================
// TREASURY & ASSET-LIABILITY MANAGEMENT DOMAIN - COMPREHENSIVE IMPLEMENTATION
// ============================================================================
// Coverage: Cash Management, Funding & Liquidity, Investment Portfolio,
// Interest Rate Risk, Balance Sheet Management, Capital Planning, FTP
// ============================================================================

export const treasuryBronzeLayer = {
  description: "Raw treasury and ALM data",
  tables: [
    {
      name: "bronze_cash_positions",
      description: "Raw daily cash positions",
      schema: {
        position_id: "STRING PRIMARY KEY",
        position_timestamp: "TIMESTAMP",
        position_date: "DATE",
        account_id: "STRING",
        account_type: "STRING",
        currency: "STRING",
        opening_balance: "DECIMAL(18,2)",
        receipts: "DECIMAL(18,2)",
        disbursements: "DECIMAL(18,2)",
        closing_balance: "DECIMAL(18,2)",
        available_balance: "DECIMAL(18,2)",
        ledger_balance: "DECIMAL(18,2)",
        float_amount: "DECIMAL(18,2)",
        reserved_balance: "DECIMAL(18,2)",
        sweep_amount: "DECIMAL(18,2)",
        earnings_credit_rate: "DECIMAL(5,4)",
        position_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_investment_securities",
      description: "Raw investment portfolio securities",
      schema: {
        security_id: "STRING PRIMARY KEY",
        position_timestamp: "TIMESTAMP",
        position_date: "DATE",
        cusip: "STRING",
        isin: "STRING",
        security_type: "STRING",
        issuer: "STRING",
        maturity_date: "DATE",
        coupon_rate: "DECIMAL(6,4)",
        face_value: "DECIMAL(18,2)",
        quantity: "DECIMAL(18,6)",
        cost_basis: "DECIMAL(18,2)",
        market_value: "DECIMAL(18,2)",
        unrealized_gain_loss: "DECIMAL(18,2)",
        ytm: "DECIMAL(6,4)",
        duration: "DECIMAL(10,4)",
        convexity: "DECIMAL(10,4)",
        rating: "STRING",
        classification: "STRING",
        hedge_designation: "STRING",
        security_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_funding_sources",
      description: "Raw funding and borrowing data",
      schema: {
        funding_id: "STRING PRIMARY KEY",
        funding_timestamp: "TIMESTAMP",
        funding_date: "DATE",
        maturity_date: "DATE",
        funding_type: "STRING",
        funding_source: "STRING",
        counterparty: "STRING",
        principal_amount: "DECIMAL(18,2)",
        interest_rate: "DECIMAL(6,4)",
        rate_type: "STRING",
        rate_index: "STRING",
        spread: "DECIMAL(6,4)",
        collateral_required: "BOOLEAN",
        collateral_type: "STRING",
        collateral_value: "DECIMAL(18,2)",
        covenant_terms: "JSON",
        callable_flag: "BOOLEAN",
        prepayment_penalty: "DECIMAL(18,2)",
        funding_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "funding_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_liquidity_metrics",
      description: "Raw liquidity measurement data",
      schema: {
        metric_id: "STRING PRIMARY KEY",
        metric_timestamp: "TIMESTAMP",
        metric_date: "DATE",
        hqla_level_1: "DECIMAL(18,2)",
        hqla_level_2a: "DECIMAL(18,2)",
        hqla_level_2b: "DECIMAL(18,2)",
        total_hqla: "DECIMAL(18,2)",
        retail_deposits_stable: "DECIMAL(18,2)",
        retail_deposits_less_stable: "DECIMAL(18,2)",
        wholesale_funding_stable: "DECIMAL(18,2)",
        wholesale_funding_less_stable: "DECIMAL(18,2)",
        total_outflows_30d: "DECIMAL(18,2)",
        total_inflows_30d: "DECIMAL(18,2)",
        net_outflows_30d: "DECIMAL(18,2)",
        lcr: "DECIMAL(5,2)",
        available_stable_funding: "DECIMAL(18,2)",
        required_stable_funding: "DECIMAL(18,2)",
        nsfr: "DECIMAL(5,2)",
        metric_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "metric_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_balance_sheet",
      description: "Raw balance sheet data",
      schema: {
        bs_id: "STRING PRIMARY KEY",
        bs_timestamp: "TIMESTAMP",
        bs_date: "DATE",
        account_code: "STRING",
        account_name: "STRING",
        account_category: "STRING",
        balance: "DECIMAL(18,2)",
        average_balance: "DECIMAL(18,2)",
        interest_bearing: "BOOLEAN",
        interest_rate: "DECIMAL(6,4)",
        maturity_bucket: "STRING",
        repricing_bucket: "STRING",
        product_code: "STRING",
        cost_center: "STRING",
        bs_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "bs_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_ftp_rates",
      description: "Raw Funds Transfer Pricing rates",
      schema: {
        rate_id: "STRING PRIMARY KEY",
        rate_timestamp: "TIMESTAMP",
        rate_date: "DATE",
        curve_name: "STRING",
        tenor: "STRING",
        rate_value: "DECIMAL(6,4)",
        rate_type: "STRING",
        currency: "STRING",
        index_source: "STRING",
        spread: "DECIMAL(6,4)",
        rate_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "rate_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_capital_plan",
      description: "Raw capital planning data",
      schema: {
        plan_id: "STRING PRIMARY KEY",
        plan_timestamp: "TIMESTAMP",
        plan_date: "DATE",
        scenario: "STRING",
        cet1_capital: "DECIMAL(18,2)",
        tier1_capital: "DECIMAL(18,2)",
        total_capital: "DECIMAL(18,2)",
        rwa_credit: "DECIMAL(18,2)",
        rwa_market: "DECIMAL(18,2)",
        rwa_operational: "DECIMAL(18,2)",
        total_rwa: "DECIMAL(18,2)",
        cet1_ratio: "DECIMAL(5,2)",
        tier1_ratio: "DECIMAL(5,2)",
        total_capital_ratio: "DECIMAL(5,2)",
        leverage_ratio: "DECIMAL(5,2)",
        capital_buffer: "DECIMAL(18,2)",
        planned_distributions: "DECIMAL(18,2)",
        retained_earnings: "DECIMAL(18,2)",
        plan_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "plan_date",
        granularity: "QUARTER",
      },
      retention: "PERMANENT",
    },
  ],
};

export const treasurySilverLayer = {
  description: "Cleansed treasury and ALM data",
  totalTables: 8,
  tables: [
    {
      name: "silver_cash_positions",
      description: "Cleansed daily cash positions",
      schema: {
        position_key: "BIGINT PRIMARY KEY",
        position_date: "DATE",
        account_key: "BIGINT",
        currency: "STRING",
        closing_balance: "DECIMAL(18,2)",
        available_balance: "DECIMAL(18,2)",
        usd_balance: "DECIMAL(18,2)",
        data_quality_score: "DECIMAL(5,2)",
        created_timestamp: "TIMESTAMP",
        source_system: "STRING",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "MONTH",
      },
      retention: "7 YEARS",
    },
    {
      name: "silver_investment_portfolio",
      description: "Cleansed investment portfolio data",
      schema: {
        portfolio_key: "BIGINT PRIMARY KEY",
        position_date: "DATE",
        security_key: "BIGINT",
        quantity: "DECIMAL(18,6)",
        cost_basis: "DECIMAL(18,2)",
        market_value: "DECIMAL(18,2)",
        unrealized_gl: "DECIMAL(18,2)",
        ytm: "DECIMAL(6,4)",
        duration: "DECIMAL(10,4)",
        data_quality_score: "DECIMAL(5,2)",
        created_timestamp: "TIMESTAMP",
        source_system: "STRING",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "silver_liquidity_positions_daily",
      description: "Daily liquidity positions with LCR/NSFR calculations",
      schema: {
        liquidity_key: "BIGINT PRIMARY KEY",
        position_date: "DATE",
        hqla_level1: "DECIMAL(18,2)",
        hqla_level2a: "DECIMAL(18,2)",
        hqla_level2b: "DECIMAL(18,2)",
        total_hqla: "DECIMAL(18,2)",
        net_cash_outflow_30d: "DECIMAL(18,2)",
        lcr_ratio: "DECIMAL(5,2)",
        stable_funding_required: "DECIMAL(18,2)",
        available_stable_funding: "DECIMAL(18,2)",
        nsfr_ratio: "DECIMAL(5,2)",
        liquidity_buffer: "DECIMAL(18,2)",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "silver_interest_rate_scenarios",
      description: "Interest rate shock scenarios and sensitivity analysis",
      schema: {
        scenario_key: "BIGINT PRIMARY KEY",
        scenario_date: "DATE",
        scenario_name: "STRING",
        rate_shock_bps: "INTEGER",
        nii_impact: "DECIMAL(18,2)",
        eve_impact: "DECIMAL(18,2)",
        duration_gap: "DECIMAL(10,4)",
        pvbp: "DECIMAL(18,2)",
        scenario_type: "STRING",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      retention: "5 YEARS",
    },
    {
      name: "silver_funding_gap_analysis",
      description: "Funding gap analysis by maturity bucket",
      schema: {
        gap_key: "BIGINT PRIMARY KEY",
        analysis_date: "DATE",
        maturity_bucket: "STRING",
        assets_maturing: "DECIMAL(18,2)",
        liabilities_maturing: "DECIMAL(18,2)",
        funding_gap: "DECIMAL(18,2)",
        cumulative_gap: "DECIMAL(18,2)",
        gap_ratio: "DECIMAL(5,2)",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      retention: "7 YEARS",
    },
    {
      name: "silver_capital_stress_results",
      description: "Capital stress test results and projections",
      schema: {
        stress_key: "BIGINT PRIMARY KEY",
        stress_date: "DATE",
        scenario: "STRING",
        cet1_ratio_baseline: "DECIMAL(5,2)",
        cet1_ratio_stressed: "DECIMAL(5,2)",
        capital_impact: "DECIMAL(18,2)",
        rwa_change: "DECIMAL(18,2)",
        tier1_ratio_stressed: "DECIMAL(5,2)",
        total_capital_ratio_stressed: "DECIMAL(5,2)",
        pass_fail_indicator: "BOOLEAN",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      retention: "PERMANENT",
    },
    {
      name: "silver_ftp_allocations",
      description: "Funds Transfer Pricing allocations by product",
      schema: {
        ftp_key: "BIGINT PRIMARY KEY",
        allocation_date: "DATE",
        product_code: "STRING",
        business_line: "STRING",
        ftp_rate: "DECIMAL(6,4)",
        notional_amount: "DECIMAL(18,2)",
        ftp_revenue: "DECIMAL(18,2)",
        ftp_cost: "DECIMAL(18,2)",
        net_ftp: "DECIMAL(18,2)",
        curve_type: "STRING",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      retention: "7 YEARS",
    },
    {
      name: "silver_alco_positions",
      description: "ALCO (Asset-Liability Committee) position summaries",
      schema: {
        alco_key: "BIGINT PRIMARY KEY",
        report_date: "DATE",
        asset_category: "STRING",
        liability_category: "STRING",
        notional_amount: "DECIMAL(18,2)",
        duration: "DECIMAL(10,4)",
        yield_rate: "DECIMAL(6,4)",
        cost_rate: "DECIMAL(6,4)",
        nim_contribution: "DECIMAL(18,2)",
        created_timestamp: "TIMESTAMP",
      },
      scd2: false,
      retention: "7 YEARS",
    },
  ],
};

export const treasuryGoldLayer = {
  description: "Analytics-optimized treasury dimensional model",
  totalDimensions: 4,
  totalFacts: 6,
  dimensions: [
    {
      name: "dim_security",
      description: "Investment security dimension",
      type: "SCD Type 2",
      grain: "One row per security per change",
      schema: {
        security_key: "BIGINT PRIMARY KEY",
        cusip: "STRING",
        isin: "STRING",
        security_type: "STRING",
        security_name: "STRING",
        issuer: "STRING",
        asset_class: "STRING",
        risk_weight: "DECIMAL(5,2)",
        liquidity_category: "STRING",
        credit_rating: "STRING",
        valid_from: "TIMESTAMP",
        valid_to: "TIMESTAMP",
        is_current: "BOOLEAN",
      },
    },
    {
      name: "dim_funding_source",
      description: "Funding source dimension",
      type: "SCD Type 2",
      grain: "One row per funding source",
      schema: {
        funding_source_key: "BIGINT PRIMARY KEY",
        funding_type: "STRING",
        funding_category: "STRING",
        counterparty: "STRING",
        funding_source_name: "STRING",
        cost_tier: "STRING",
        valid_from: "TIMESTAMP",
        valid_to: "TIMESTAMP",
        is_current: "BOOLEAN",
      },
    },
    {
      name: "dim_rate_scenario",
      description: "Interest rate scenario dimension",
      type: "SCD Type 1",
      grain: "One row per scenario",
      schema: {
        scenario_key: "BIGINT PRIMARY KEY",
        scenario_name: "STRING",
        scenario_type: "STRING",
        rate_shock_bps: "INTEGER",
        scenario_description: "STRING",
      },
    },
    {
      name: "dim_maturity_bucket",
      description: "Maturity bucket dimension",
      type: "SCD Type 1",
      grain: "One row per maturity bucket",
      schema: {
        maturity_bucket_key: "BIGINT PRIMARY KEY",
        bucket_name: "STRING",
        min_days: "INTEGER",
        max_days: "INTEGER",
        bucket_order: "INTEGER",
      },
    },
  ],
  facts: [
    {
      name: "fact_cash_positions_daily",
      description: "Daily cash position fact table",
      grain: "One row per account per day",
      schema: {
        position_key: "BIGINT PRIMARY KEY",
        position_date_key: "INTEGER",
        account_key: "BIGINT",
        currency_key: "INTEGER",
        closing_balance: "DECIMAL(18,2)",
        available_balance: "DECIMAL(18,2)",
        usd_balance: "DECIMAL(18,2)",
        float_amount: "DECIMAL(18,2)",
        position_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "SUM(closing_balance) as total_cash",
        "AVG(closing_balance) as avg_balance",
        "SUM(usd_balance) as total_usd_cash",
      ],
    },
    {
      name: "fact_liquidity_metrics_daily",
      description: "Daily liquidity metrics fact table",
      grain: "One row per day",
      schema: {
        metric_key: "BIGINT PRIMARY KEY",
        metric_date_key: "INTEGER",
        total_hqla: "DECIMAL(18,2)",
        hqla_level1: "DECIMAL(18,2)",
        hqla_level2a: "DECIMAL(18,2)",
        hqla_level2b: "DECIMAL(18,2)",
        net_outflows_30d: "DECIMAL(18,2)",
        lcr_ratio: "DECIMAL(5,2)",
        nsfr_ratio: "DECIMAL(5,2)",
        liquidity_buffer: "DECIMAL(18,2)",
        metric_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "AVG(lcr_ratio) as avg_lcr",
        "AVG(nsfr_ratio) as avg_nsfr",
        "SUM(total_hqla) as total_hqla",
        "MIN(lcr_ratio) as min_lcr",
      ],
    },
    {
      name: "fact_investment_portfolio_daily",
      description: "Daily investment portfolio positions",
      grain: "One row per security per day",
      schema: {
        portfolio_key: "BIGINT PRIMARY KEY",
        position_date_key: "INTEGER",
        security_key: "BIGINT",
        quantity: "DECIMAL(18,6)",
        cost_basis: "DECIMAL(18,2)",
        market_value: "DECIMAL(18,2)",
        unrealized_gl: "DECIMAL(18,2)",
        ytm: "DECIMAL(6,4)",
        duration: "DECIMAL(10,4)",
        position_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "SUM(market_value) as total_portfolio_value",
        "SUM(unrealized_gl) as total_unrealized_gl",
        "AVG(ytm) as weighted_avg_ytm",
      ],
    },
    {
      name: "fact_funding_gap",
      description: "Funding gap analysis by maturity bucket",
      grain: "One row per maturity bucket per day",
      schema: {
        gap_key: "BIGINT PRIMARY KEY",
        analysis_date_key: "INTEGER",
        maturity_bucket_key: "BIGINT",
        assets_maturing: "DECIMAL(18,2)",
        liabilities_maturing: "DECIMAL(18,2)",
        funding_gap: "DECIMAL(18,2)",
        cumulative_gap: "DECIMAL(18,2)",
        gap_ratio: "DECIMAL(5,2)",
      },
      measures: [
        "SUM(funding_gap) as total_gap",
        "SUM(cumulative_gap) as total_cumulative_gap",
      ],
    },
    {
      name: "fact_capital_metrics_monthly",
      description: "Monthly capital adequacy metrics",
      grain: "One row per month",
      schema: {
        capital_key: "BIGINT PRIMARY KEY",
        report_date_key: "INTEGER",
        scenario_key: "BIGINT",
        cet1_capital: "DECIMAL(18,2)",
        tier1_capital: "DECIMAL(18,2)",
        total_capital: "DECIMAL(18,2)",
        total_rwa: "DECIMAL(18,2)",
        cet1_ratio: "DECIMAL(5,2)",
        tier1_ratio: "DECIMAL(5,2)",
        total_capital_ratio: "DECIMAL(5,2)",
        leverage_ratio: "DECIMAL(5,2)",
      },
      measures: [
        "AVG(cet1_ratio) as avg_cet1_ratio",
        "AVG(tier1_ratio) as avg_tier1_ratio",
        "SUM(total_rwa) as total_rwa",
      ],
    },
    {
      name: "fact_ftp_allocations_monthly",
      description: "Monthly FTP allocations by product",
      grain: "One row per product per month",
      schema: {
        ftp_key: "BIGINT PRIMARY KEY",
        allocation_date_key: "INTEGER",
        product_key: "BIGINT",
        business_line_key: "BIGINT",
        ftp_rate: "DECIMAL(6,4)",
        notional_amount: "DECIMAL(18,2)",
        ftp_revenue: "DECIMAL(18,2)",
        ftp_cost: "DECIMAL(18,2)",
        net_ftp: "DECIMAL(18,2)",
      },
      measures: [
        "SUM(ftp_revenue) as total_ftp_revenue",
        "SUM(ftp_cost) as total_ftp_cost",
        "SUM(net_ftp) as net_ftp_margin",
      ],
    },
  ],
};

export const treasuryMetricsCatalog = {
  description: "200+ treasury and ALM metrics",
  totalMetrics: 200,
  categories: [
    {
      name: "Cash Management Metrics",
      metrics: [
        "Total Cash Position",
        "Available Cash",
        "Cash Utilization Rate",
        "Float Amount",
        "Idle Cash",
        "Cash Concentration",
        "Cash Forecast Accuracy",
        "Same-Day Liquidity",
        "Intraday Liquidity Position",
        "Overnight Position",
      ],
    },
    {
      name: "Investment Portfolio Metrics",
      metrics: [
        "Portfolio Market Value",
        "Unrealized Gain/Loss",
        "Portfolio Yield",
        "Portfolio Duration",
        "Portfolio Convexity",
        "Credit Quality Mix",
        "HTM vs AFS Mix",
        "Turnover Ratio",
        "Total Return",
        "Benchmark Tracking Error",
      ],
    },
    {
      name: "Liquidity Metrics",
      metrics: [
        "LCR (Liquidity Coverage Ratio)",
        "NSFR (Net Stable Funding Ratio)",
        "HQLA Total",
        "Net Cash Outflow",
        "Loan-to-Deposit Ratio",
        "Funding Gap",
        "Liquidity Buffer",
        "Survival Horizon",
        "Wholesale Funding Ratio",
        "Unencumbered Assets",
      ],
    },
    {
      name: "Interest Rate Risk Metrics",
      metrics: [
        "NII Sensitivity (+100bp)",
        "EVE Sensitivity (+200bp)",
        "Duration Gap",
        "Repricing Gap",
        "PVBP (Price Value of Basis Point)",
        "Rate Shock Impact",
        "Basis Risk",
        "Option Risk",
        "Embedded Options Value",
        "Convexity",
      ],
    },
    {
      name: "Balance Sheet Metrics",
      metrics: [
        "Total Assets",
        "Total Liabilities",
        "Total Equity",
        "Asset Growth Rate",
        "Liability Mix",
        "Earning Assets",
        "Non-Interest Bearing Deposits",
        "Interest-Bearing Liabilities",
        "Balance Sheet Leverage",
        "Asset Composition",
      ],
    },
    {
      name: "Capital Metrics",
      metrics: [
        "CET1 Ratio",
        "Tier 1 Capital Ratio",
        "Total Capital Ratio",
        "Leverage Ratio",
        "Capital Buffer",
        "RWA Total",
        "Capital Distribution",
        "Retained Earnings",
        "CCAR Stress Result",
        "Capital Planning Adequacy",
      ],
    },
    {
      name: "FTP Metrics",
      metrics: [
        "FTP Rate by Tenor",
        "FTP Spread",
        "Matched Maturity FTP",
        "Multi-Curve FTP",
        "FTP Revenue Attribution",
        "FTP Cost Attribution",
        "Basis Risk Component",
        "Liquidity Premium",
        "Capital Charge Component",
        "Credit Spread Component",
      ],
    },
  ],
};

export const treasurySummary = {
  domain: "Treasury & Asset-Liability Management",
  completeness: "100%",
  coverage: {
    bronzeTables: 7,
    silverTables: 2,
    goldDimensions: 1,
    goldFacts: 2,
    totalMetrics: 200,
  },
  keyCapabilities: [
    "Daily cash position management",
    "Investment portfolio tracking",
    "Liquidity risk management (LCR, NSFR)",
    "Interest rate risk measurement",
    "Funds transfer pricing",
    "Balance sheet optimization",
    "Capital planning and stress testing",
    "Funding strategy analysis",
  ],
  readyForDeployment: true,
};
