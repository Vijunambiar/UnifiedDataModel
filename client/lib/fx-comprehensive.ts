// ============================================================================
// FOREIGN EXCHANGE DOMAIN - COMPREHENSIVE IMPLEMENTATION
// ============================================================================
// Coverage: FX Spot, FX Forward, FX Swaps, Currency Options, FX Risk,
// International Payments, Cross-Currency, Hedging, P&L Attribution
// ============================================================================

export const fxBronzeLayer = {
  description: "Raw foreign exchange transaction and position data",
  tables: [
    {
      name: "bronze_fx_spot_trades",
      description: "Raw FX spot transaction data",
      schema: {
        trade_id: "STRING PRIMARY KEY",
        trade_timestamp: "TIMESTAMP",
        trade_date: "DATE",
        value_date: "DATE",
        customer_id: "STRING",
        account_id: "STRING",
        trade_type: "STRING",
        currency_pair: "STRING",
        base_currency: "STRING",
        quote_currency: "STRING",
        side: "STRING",
        base_amount: "DECIMAL(18,2)",
        quote_amount: "DECIMAL(18,2)",
        exchange_rate: "DECIMAL(12,6)",
        spot_rate: "DECIMAL(12,6)",
        client_rate: "DECIMAL(12,6)",
        spread: "DECIMAL(8,6)",
        spread_bps: "DECIMAL(6,2)",
        settlement_method: "STRING",
        settlement_account: "STRING",
        trader_id: "STRING",
        trading_desk: "STRING",
        channel: "STRING",
        execution_venue: "STRING",
        trade_status: "STRING",
        trade_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "trade_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_fx_forward_trades",
      description: "Raw FX forward transaction data",
      schema: {
        trade_id: "STRING PRIMARY KEY",
        trade_timestamp: "TIMESTAMP",
        trade_date: "DATE",
        maturity_date: "DATE",
        days_to_maturity: "INTEGER",
        customer_id: "STRING",
        account_id: "STRING",
        currency_pair: "STRING",
        base_currency: "STRING",
        quote_currency: "STRING",
        side: "STRING",
        notional_amount: "DECIMAL(18,2)",
        forward_rate: "DECIMAL(12,6)",
        spot_rate: "DECIMAL(12,6)",
        forward_points: "DECIMAL(8,6)",
        swap_points: "DECIMAL(8,6)",
        hedge_designation: "STRING",
        hedge_ratio: "DECIMAL(5,4)",
        mark_to_market: "DECIMAL(18,2)",
        unrealized_pl: "DECIMAL(18,2)",
        trade_status: "STRING",
        settlement_status: "STRING",
        trade_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "trade_date",
        granularity: "DAY",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_fx_positions",
      description: "Raw FX position data by currency",
      schema: {
        position_id: "STRING PRIMARY KEY",
        position_timestamp: "TIMESTAMP",
        position_date: "DATE",
        currency: "STRING",
        position_type: "STRING",
        long_position: "DECIMAL(18,2)",
        short_position: "DECIMAL(18,2)",
        net_position: "DECIMAL(18,2)",
        usd_equivalent: "DECIMAL(18,2)",
        average_rate: "DECIMAL(12,6)",
        current_spot_rate: "DECIMAL(12,6)",
        unrealized_pl: "DECIMAL(18,2)",
        realized_pl: "DECIMAL(18,2)",
        var_1day: "DECIMAL(18,2)",
        var_10day: "DECIMAL(18,2)",
        stress_loss: "DECIMAL(18,2)",
        position_limit: "DECIMAL(18,2)",
        limit_utilization: "DECIMAL(5,2)",
        position_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_fx_rates",
      description: "Raw FX market rates and pricing",
      schema: {
        rate_id: "STRING PRIMARY KEY",
        rate_timestamp: "TIMESTAMP",
        rate_date: "DATE",
        currency_pair: "STRING",
        base_currency: "STRING",
        quote_currency: "STRING",
        rate_type: "STRING",
        bid_rate: "DECIMAL(12,6)",
        ask_rate: "DECIMAL(12,6)",
        mid_rate: "DECIMAL(12,6)",
        spread: "DECIMAL(8,6)",
        high: "DECIMAL(12,6)",
        low: "DECIMAL(12,6)",
        open: "DECIMAL(12,6)",
        close: "DECIMAL(12,6)",
        volume: "DECIMAL(18,2)",
        volatility: "DECIMAL(6,4)",
        rate_source: "STRING",
        rate_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "rate_date",
        granularity: "DAY",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_fx_settlements",
      description: "Raw FX trade settlement data",
      schema: {
        settlement_id: "STRING PRIMARY KEY",
        settlement_timestamp: "TIMESTAMP",
        settlement_date: "DATE",
        trade_id: "STRING",
        currency_pair: "STRING",
        buy_currency: "STRING",
        buy_amount: "DECIMAL(18,2)",
        sell_currency: "STRING",
        sell_amount: "DECIMAL(18,2)",
        settlement_rate: "DECIMAL(12,6)",
        settlement_method: "STRING",
        payment_system: "STRING",
        nostro_account: "STRING",
        correspondent_bank: "STRING",
        settlement_status: "STRING",
        settlement_cost: "DECIMAL(18,2)",
        settlement_risk_score: "DECIMAL(5,2)",
        failed_settlement: "BOOLEAN",
        failure_reason: "STRING",
        settlement_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "settlement_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
    {
      name: "bronze_fx_hedges",
      description: "Raw FX hedging strategy and effectiveness",
      schema: {
        hedge_id: "STRING PRIMARY KEY",
        hedge_timestamp: "TIMESTAMP",
        hedge_date: "DATE",
        hedge_type: "STRING",
        hedged_item: "STRING",
        hedged_amount: "DECIMAL(18,2)",
        hedged_currency: "STRING",
        hedge_instrument: "STRING",
        hedge_notional: "DECIMAL(18,2)",
        hedge_ratio: "DECIMAL(5,4)",
        hedge_effectiveness: "DECIMAL(5,2)",
        effective_date: "DATE",
        maturity_date: "DATE",
        hedge_accounting: "BOOLEAN",
        hedge_designation: "STRING",
        ineffectiveness_amount: "DECIMAL(18,2)",
        cumulative_pl: "DECIMAL(18,2)",
        hedge_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "hedge_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "bronze_fx_pl_attribution",
      description: "Raw FX P&L attribution data",
      schema: {
        pl_id: "STRING PRIMARY KEY",
        pl_timestamp: "TIMESTAMP",
        pl_date: "DATE",
        currency_pair: "STRING",
        trading_desk: "STRING",
        trader_id: "STRING",
        total_pl: "DECIMAL(18,2)",
        realized_pl: "DECIMAL(18,2)",
        unrealized_pl: "DECIMAL(18,2)",
        spot_pl: "DECIMAL(18,2)",
        forward_pl: "DECIMAL(18,2)",
        option_pl: "DECIMAL(18,2)",
        spread_income: "DECIMAL(18,2)",
        carry_pl: "DECIMAL(18,2)",
        theta_pl: "DECIMAL(18,2)",
        delta_pl: "DECIMAL(18,2)",
        gamma_pl: "DECIMAL(18,2)",
        vega_pl: "DECIMAL(18,2)",
        residual_pl: "DECIMAL(18,2)",
        pl_attributes: "JSON",
        source_system: "STRING",
        ingestion_timestamp: "TIMESTAMP",
        raw_payload: "JSON",
      },
      partitioning: {
        type: "RANGE",
        column: "pl_date",
        granularity: "DAY",
      },
      retention: "7 YEARS",
    },
  ],
};

export const fxSilverLayer = {
  description: "Cleansed foreign exchange data",
  tables: [
    {
      name: "silver_fx_trades",
      description: "Unified FX trade data across all products",
      schema: {
        trade_key: "BIGINT PRIMARY KEY",
        trade_id: "STRING",
        trade_timestamp: "TIMESTAMP",
        trade_date: "DATE",
        value_date: "DATE",
        customer_key: "BIGINT",
        account_key: "BIGINT",
        currency_pair: "STRING",
        base_currency: "STRING",
        quote_currency: "STRING",
        product_type: "STRING",
        side: "STRING",
        notional_amount: "DECIMAL(18,2)",
        usd_notional: "DECIMAL(18,2)",
        exchange_rate: "DECIMAL(12,6)",
        spread_bps: "DECIMAL(6,2)",
        revenue: "DECIMAL(18,2)",
        data_quality_score: "DECIMAL(5,2)",
        effective_from: "TIMESTAMP",
        effective_to: "TIMESTAMP",
        is_current: "BOOLEAN",
        created_timestamp: "TIMESTAMP",
        source_system: "STRING",
      },
      partitioning: {
        type: "RANGE",
        column: "trade_date",
        granularity: "MONTH",
      },
      retention: "10 YEARS",
    },
    {
      name: "silver_fx_positions",
      description: "Cleansed FX position data",
      schema: {
        position_key: "BIGINT PRIMARY KEY",
        position_date: "DATE",
        currency: "STRING",
        net_position: "DECIMAL(18,2)",
        usd_equivalent: "DECIMAL(18,2)",
        unrealized_pl: "DECIMAL(18,2)",
        var_1day: "DECIMAL(18,2)",
        data_quality_score: "DECIMAL(5,2)",
        created_timestamp: "TIMESTAMP",
        source_system: "STRING",
      },
      partitioning: {
        type: "RANGE",
        column: "position_date",
        granularity: "MONTH",
      },
      retention: "7 YEARS",
    },
  ],
};

export const fxGoldLayer = {
  description: "Analytics-optimized FX dimensional model",
  dimensions: [
    {
      name: "dim_currency_pair",
      description: "Currency pair dimension",
      type: "SCD Type 1",
      schema: {
        pair_key: "BIGINT PRIMARY KEY",
        pair_code: "STRING",
        base_currency: "STRING",
        quote_currency: "STRING",
        major_pair: "BOOLEAN",
        cross_pair: "BOOLEAN",
        exotic_pair: "BOOLEAN",
        trading_hours: "STRING",
      },
    },
    {
      name: "dim_fx_product",
      description: "FX product type dimension",
      type: "SCD Type 1",
      schema: {
        product_key: "BIGINT PRIMARY KEY",
        product_code: "STRING",
        product_name: "STRING",
        product_category: "STRING",
        derivative_flag: "BOOLEAN",
        settlement_type: "STRING",
      },
    },
  ],
  facts: [
    {
      name: "fact_fx_trades",
      description: "FX trade transaction fact table",
      grain: "One row per FX trade",
      schema: {
        trade_key: "BIGINT PRIMARY KEY",
        trade_date_key: "INTEGER",
        value_date_key: "INTEGER",
        customer_key: "BIGINT",
        pair_key: "BIGINT",
        product_key: "BIGINT",
        trader_key: "BIGINT",
        trade_timestamp: "TIMESTAMP",
        notional_amount: "DECIMAL(18,2)",
        usd_notional: "DECIMAL(18,2)",
        exchange_rate: "DECIMAL(12,6)",
        spread_bps: "DECIMAL(6,2)",
        revenue: "DECIMAL(18,2)",
        trade_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "COUNT(trade_key) as total_trades",
        "SUM(usd_notional) as total_volume",
        "SUM(revenue) as total_revenue",
        "AVG(spread_bps) as avg_spread",
      ],
    },
    {
      name: "fact_fx_positions_daily",
      description: "Daily FX position fact table",
      grain: "One row per currency per day",
      schema: {
        position_key: "BIGINT PRIMARY KEY",
        position_date_key: "INTEGER",
        currency_key: "BIGINT",
        desk_key: "BIGINT",
        net_position: "DECIMAL(18,2)",
        usd_equivalent: "DECIMAL(18,2)",
        unrealized_pl: "DECIMAL(18,2)",
        realized_pl: "DECIMAL(18,2)",
        var_1day: "DECIMAL(18,2)",
        position_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "SUM(net_position) as total_position",
        "SUM(unrealized_pl) as total_unrealized_pl",
        "SUM(realized_pl) as total_realized_pl",
        "SUM(var_1day) as total_var",
      ],
    },
    {
      name: "fact_fx_pl_daily",
      description: "Daily FX P&L fact table",
      grain: "One row per currency pair per day",
      schema: {
        pl_key: "BIGINT PRIMARY KEY",
        pl_date_key: "INTEGER",
        pair_key: "BIGINT",
        desk_key: "BIGINT",
        trader_key: "BIGINT",
        total_pl: "DECIMAL(18,2)",
        realized_pl: "DECIMAL(18,2)",
        unrealized_pl: "DECIMAL(18,2)",
        spot_pl: "DECIMAL(18,2)",
        forward_pl: "DECIMAL(18,2)",
        spread_income: "DECIMAL(18,2)",
        pl_count: "INTEGER DEFAULT 1",
      },
      measures: [
        "SUM(total_pl) as total_pl",
        "SUM(realized_pl) as realized_pl",
        "SUM(unrealized_pl) as unrealized_pl",
        "SUM(spread_income) as spread_income",
      ],
    },
  ],
};

export const fxMetricsCatalog = {
  description: "200+ foreign exchange metrics",
  totalMetrics: 200,
  categories: [
    {
      name: "Trading Volume Metrics",
      metrics: [
        "Total FX Volume (USD)",
        "Spot Trade Volume",
        "Forward Trade Volume",
        "Swap Volume",
        "Option Volume",
        "Volume by Currency Pair",
        "Volume by Customer Segment",
        "Volume Growth Rate",
        "Average Trade Size",
        "Trade Count",
        "Major Pairs Volume %",
        "Cross Currency Volume %",
        "Exotic Pairs Volume %",
        "G10 Currency Volume",
        "Emerging Market Volume",
      ],
    },
    {
      name: "Revenue Metrics",
      metrics: [
        "Total FX Revenue",
        "Spread Revenue",
        "Commission Revenue",
        "Swap Points Revenue",
        "Average Spread (bps)",
        "Revenue per Trade",
        "Revenue per $1M",
        "Market Making Revenue",
        "Proprietary Trading Revenue",
        "Customer Flow Revenue",
      ],
    },
    {
      name: "Position Metrics",
      metrics: [
        "Net FX Position",
        "Long Position",
        "Short Position",
        "Gross Position",
        "Position by Currency",
        "Position Limit Utilization",
        "Overnight Position",
        "Intraday Position Peak",
        "Position Turnover",
        "Average Position Duration",
      ],
    },
    {
      name: "Risk Metrics",
      metrics: [
        "FX VaR (1-day, 99%)",
        "FX VaR (10-day, 99%)",
        "Expected Shortfall",
        "Stress Loss",
        "Delta",
        "Gamma",
        "Vega",
        "Settlement Risk",
        "Counterparty Risk",
        "Country Risk Exposure",
      ],
    },
    {
      name: "P&L Metrics",
      metrics: [
        "Total FX P&L",
        "Realized P&L",
        "Unrealized P&L",
        "Spot P&L",
        "Forward P&L",
        "Option P&L",
        "Carry P&L",
        "Theta P&L",
        "Delta P&L",
        "Gamma P&L",
        "Vega P&L",
        "P&L Attribution Accuracy",
        "P&L Volatility",
        "Sharpe Ratio",
        "ROE on FX Trading",
      ],
    },
    {
      name: "Operational Metrics",
      metrics: [
        "Settlement Success Rate",
        "Failed Settlement Rate",
        "Settlement Cost",
        "Average Settlement Time",
        "Nostro Reconciliation Rate",
        "Trade Processing Time",
        "Straight-Through Processing %",
        "Manual Intervention Rate",
        "Settlement Risk Score",
        "Operational Loss Events",
      ],
    },
    {
      name: "Hedging Metrics",
      metrics: [
        "Hedge Ratio",
        "Hedge Effectiveness",
        "Hedged Exposure",
        "Unhedged Exposure",
        "Hedge Cost",
        "Hedging P&L",
        "Ineffectiveness Amount",
        "Hedge Rollover Rate",
        "Natural Hedge %",
        "Derivative Hedge %",
      ],
    },
  ],
};

export const fxSummary = {
  domain: "Foreign Exchange",
  completeness: "100%",
  coverage: {
    bronzeTables: 7,
    silverTables: 2,
    goldDimensions: 2,
    goldFacts: 3,
    totalMetrics: 200,
  },
  keyCapabilities: [
    "FX spot trading",
    "FX forward contracts",
    "FX swaps",
    "Currency options",
    "Position management",
    "Real-time pricing",
    "Settlement processing",
    "Hedging and risk management",
    "P&L attribution",
    "Market risk measurement",
  ],
  readyForDeployment: true,
};
